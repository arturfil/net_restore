{"version":3,"sources":["app/components/AppPagination.tsx","app/components/CheckboxButtons.tsx","app/components/RadioButton.tsx","app/models/pagination.ts","app/api/agent.ts","features/basket/basketSlice.ts","app/util/util.ts","features/account/accountSlice.ts","features/catalog/catalogSlice.ts","features/contact/counterSlice.ts","app/store/configureStore.ts","app/hooks/useProducts.tsx","app/layout/Loader.tsx","features/catalog/ProductCard.tsx","features/catalog/ProductCardSeketon.tsx","features/catalog/ProductList.tsx","features/catalog/ProductSearch.tsx","features/catalog/Catalog.tsx","app/layout/SignedInMenu.tsx","app/layout/Header.tsx","app/errors/ServerError.tsx","app/errors/NotFound.tsx","features/catalog/ProductDetailsPage.tsx","features/basket/BasketSummary.tsx","features/basket/BasketTable.tsx","features/basket/BasketPage.tsx","features/account/Login.tsx","features/account/Register.tsx","app/layout/PrivateRoute.tsx","features/orders/OrderDetail.tsx","features/orders/Orders.tsx","app/components/AppCheckbox.tsx","app/components/AppTextInput.tsx","features/checkout/AddressForm.tsx","features/checkout/StripeInput.tsx","features/checkout/PaymentForm.tsx","features/checkout/Review.tsx","features/checkout/checkoutValidation.ts","features/checkout/CheckoutPage.tsx","features/checkout/CheckoutWrapper.tsx","app/components/AppDropZone.tsx","app/components/AppSelectList.tsx","features/admin/productValidation.ts","features/admin/ProductForm.tsx","features/admin/Inventory.tsx","app/layout/App.tsx","reportWebVitals.ts","index.tsx"],"names":["AppPagination","metaData","onPageChange","currentPage","totalCount","totalPages","pageSize","useState","pageNumber","setPageNumber","Box","display","justifyContent","alignItems","Typography","Pagination","color","size","count","page","onChange","e","handlePageChange","CheckboxButtons","items","checked","checkedItems","setCheckedItems","FormGroup","map","item","FormControlLabel","control","Checkbox","onClick","value","newChecked","findIndex","filter","handleCheck","indexOf","label","RadioButtonGroup","options","selectedValue","FormControl","component","RadioGroup","Radio","PaginatedResponse","this","axios","defaults","baseURL","process","withCredentials","responseBody","response","data","interceptors","request","use","config","token","store","getState","account","user","headers","Authorization","a","pagination","JSON","parse","error","status","errors","modelStateErrors","key","push","flat","toast","title","history","pathname","state","Promise","reject","requests","url","params","get","then","body","post","delete","put","createFormData","formData","FormData","append","Basket","addItem","productId","quantity","removeItem","agent","Catalog","list","details","id","fetchFilters","TestErrors","get400Error","get401Error","get404Error","get500Error","getValidationError","Account","login","values","register","currentUser","fetchAddress","Orders","fetch","create","Payments","createPaymentItent","Admin","createProduct","product","updateProduct","deleteProduct","fetchBasketAsync","createAsyncThunk","_","thunkAPI","rejectWithValue","condition","b","document","cookie","match","pop","getCookie","addBasketItemAsync","thunkApi","removeBasketItemAsync","basketSlice","createSlice","name","initialState","basket","reducers","setBasket","action","payload","clearBasket","extraReducers","builder","addCase","pending","meta","arg","fulfilled","itemIndex","i","undefined","splice","rejected","console","log","addMatcher","isAnyOf","actions","signInUser","userDto","dispatch","localStorage","setItem","stringify","fetchCurrentUser","setUser","getItem","accountSlice","signOut","roles","atob","split","productsAdapter","createEntityAdapter","getAxiosParams","productParams","URLSearchParams","toString","orderBy","searchTerm","brands","length","types","fetchProductsAsync","catalog","setMetaData","fetchSingleProductAsync","__dirname","catalogSlice","getInitialState","productsLoaded","filtersLoaded","setProductParams","resetProductParams","setProduct","upsertOne","removeProduct","removeOne","setAll","productSelectors","getSelectors","counterSlice","increment","decrement","configureStore","reducer","counter","useAppDispatch","useDispatch","useAppSelector","useSelector","useProducts","products","selectAll","useEffect","Loader","message","Backdrop","open","invisible","height","CircularProgress","variant","sx","position","top","ProductCard","Card","CardMedia","image","pictureUrl","CardContent","textOverflow","overflow","whiteSpace","gutterBottom","brand","type","price","toFixed","CardActions","LoadingButton","loading","includes","Button","Link","to","ProductCardSeketon","Grid","xs","Skeleton","animation","style","marginBottom","width","ProductList","mb","container","spacing","sm","md","lg","ProductSearch","setSearchTerm","debouncedSearch","debounce","event","target","TextField","fullWidth","sortOptions","columnSpacing","Paper","p","mt","SignedInMenu","anchorEl","setAnchorEl","Boolean","handleClose","currentTarget","typography","textTransform","email","toLowerCase","Menu","onClose","TransitionComponent","Fade","MenuItem","midLinks","path","rightLinks","navStyles","textDecoration","Header","changeMode","itemCount","reduce","acc","AppBar","Toolbar","alignContent","NavLink","Switch","List","ListItem","IconButton","Badge","badgeContent","ShoppingCart","ServerError","useHistory","useLocation","Container","Divider","detail","NotFound","ProductDetailsPage","productStatus","useParams","selectById","setQuantity","find","parseInt","src","alt","TableContainer","Table","TableBody","TableRow","TableCell","description","quantityInStock","disabled","updatedQuantity","BasketSummary","subtotal","sum","deliveryFee","colSpan","align","fontStyle","BasketTable","isBasket","minWidth","TableHead","border","marginRight","Remove","Add","Delete","BasketPage","Login","location","useForm","mode","handleSubmit","formState","isSubmitting","isValid","from","maxWidth","flexDirection","Avatar","m","bgcolor","onSubmit","noValidate","required","username","helperText","margin","autoFocus","password","autoComplete","Register","setError","success","catch","forEach","handleApiErrors","pattern","PrivateRoute","Component","rest","render","props","some","r","OrderDetail","order","setSelectedOrder","orderItems","orderStatus","orders","setOrders","setLoading","selectedOrderNumber","setSelectedorderNumber","finally","o","scope","total","orderDate","AppCheckbox","field","useController","defaultValue","AppTextInput","fieldState","multiline","mulitline","rows","AddressForm","useFormContext","isDirty","StripeInput","forwardRef","ref","elementRef","useRef","useImperativeHandle","focus","current","onReady","element","PaymentForm","card","onCardInputChange","elementError","cardNumber","InputLabelProps","shrink","InputProps","inputComponent","inputProps","CardNumberElement","cardCvc","cardExpiry","CardExpiryElement","CardCvcElement","Review","validationSchema","yup","fullName","address1","address2","city","zip","country","nameOnCard","steps","CheckoutPage","activeStep","setActiveStep","orderNumber","setOrderNumber","setCard","cardComplete","setCardComplete","paymentMessage","setPaymentMessage","paymentSucceded","setPaymentSucceded","stripe","useStripe","elements","useElements","currentValidationSchema","methods","resolver","yupResolver","elementType","complete","submitOrder","saveAddress","shippingAddress","cardElement","getElement","confirmCardPayment","clientSecret","payment_method","billing_details","paymentResult","paymentIntent","reset","getValues","handleNext","handleBack","my","Stepper","pt","pb","Step","StepLabel","step","Error","getStepContent","ml","stripePromise","loadStripe","CheckoutWrapper","AppDropZone","dropZoneStyles","borderColor","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","Object","assign","preview","URL","createObjectURL","useDropzone","getRootProps","getInputProps","isDragActive","UploadFile","fontSize","FormHelperText","AppSelectList","InputLabel","Select","index","moreThan","min","file","when","is","ProductForm","cancelEdit","watch","watchFile","revokeObjectURL","maxHeight","Inverntory","editMode","setEditMode","selectedProduct","setSelectedProduct","setTarget","handleSelectProduct","startIcon","Edit","App","darkMode","setDarkMode","palleteType","theme","createTheme","palette","background","default","initApp","ThemeProvider","CssBaseline","exact","Inventory","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.39d78064.chunk.js","sourcesContent":["import { Box, Pagination, Typography } from '@mui/material'\nimport { useState } from 'react';\nimport { MetaData } from '../models/pagination'\n\ninterface Props {\n  metaData: MetaData;\n  onPageChange: (page: number) => void;\n}\n\nexport default function AppPagination({metaData, onPageChange}: Props) {\n  const { currentPage, totalCount, totalPages, pageSize } = metaData;\n  const [pageNumber, setPageNumber] = useState(currentPage);  \n\n  function handlePageChange(page: number) {\n    setPageNumber(page);\n    onPageChange(page);\n  }\n  \n  return (\n    <div>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n        <Typography>\n          Display {(currentPage -1) * pageSize + 1} - \n          {currentPage * pageSize > totalCount\n            ? totalCount\n            : currentPage * pageSize\n          } of {totalCount}\n        </Typography>\n        <Pagination\n          color=\"secondary\"\n          size=\"large\"\n          count={totalPages}\n          page={pageNumber}\n          onChange={(e, page) => handlePageChange(page)}\n        />\n      </Box>\n    </div>\n  )\n}\n","import { Checkbox, FormControlLabel, FormGroup } from \"@mui/material\";\nimport { useState } from \"react\";\n\ninterface Props {\n  items: string[];\n  checked?: string[];\n  onChange: (items: string[]) => void\n}\n\nexport default function CheckboxButtons({ items, checked, onChange }: Props) {\n  const [checkedItems, setCheckedItems] = useState(checked || []);\n\n  function handleCheck(value: string) {\n    const currentIndex = checkedItems.findIndex(item => item === value);\n    let newChecked: string[] = [];\n    if (currentIndex === -1) newChecked = [...checkedItems, value];\n    else newChecked = checkedItems.filter(item => item !== value);\n    setCheckedItems(newChecked);\n    onChange(newChecked);\n  }\n\n  return (\n    <div>\n      <FormGroup>\n        {items.map(item => (\n          <FormControlLabel\n            key={item}\n            control={\n              <Checkbox \n                onClick={() => handleCheck(item)}\n                checked={checkedItems.indexOf(item) !== -1}\n              />\n            }\n            label={item}\n          />\n        ))}\n      </FormGroup>\n    </div>\n  )\n}\n","import { FormControl, FormControlLabel, Radio, RadioGroup } from \"@mui/material\";\n\ninterface Props {\n  options: any;\n  onChange: (event: any) => void;\n  selectedValue: string\n}\n\nexport default function RadioButtonGroup({options, onChange, selectedValue}: Props) {\n\n\n  return (\n    <FormControl component=\"fieldset\">\n      <RadioGroup onChange={onChange} value={selectedValue}>\n        {options.map(({value, label}: any) => (\n          <FormControlLabel key={value} value={value} control={<Radio />} label={label} />\n        ))}\n      </RadioGroup>\n    </FormControl>\n  )\n}","export interface MetaData {\n  currentPage: number;\n  totalPages: number;\n  pageSize: number;\n  totalCount: number;\n}\n\nexport class PaginatedResponse<T> {\n  items: T;\n  metaData: MetaData;\n\n  constructor(items: T, metaData: MetaData) {\n    this.items = items;\n    this.metaData = metaData;\n  }\n}","import axios, { AxiosError, AxiosResponse } from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { history } from \"../..\";\nimport { PaginatedResponse } from \"../models/pagination\";\nimport { store } from \"../store/configureStore\";\n\nconst sleep = () => new Promise((resolve) => setTimeout(resolve, 500));\n\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\naxios.defaults.withCredentials = true;\n\nconst responseBody = (response: AxiosResponse) => response.data;\n\naxios.interceptors.request.use(config => {\n  const token = store.getState().account.user?.token;\n  if (token) config.headers!!.Authorization = `Bearer ${token}`;\n  return config;\n})\n\naxios.interceptors.response.use(async (response) => {\n    if (process.env.NODE_ENV === 'development') await sleep();\n    const pagination = response.headers['pagination'];\n    if (pagination) {\n      response.data = new PaginatedResponse(response.data, JSON.parse(pagination));\n      return response;\n    }\n    return response;\n  },\n  (error: AxiosError) => {\n    const { data, status } = error.response!;\n    switch (status) {\n      case 400:\n        if (data.errors) {\n          const modelStateErrors: string[] = [];\n          for (const key in data.errors) {\n            if (data.errors[key]) {\n              modelStateErrors.push(data.errors[key]);\n            }\n          }\n          throw modelStateErrors.flat();\n        }\n        toast.error(data.title);\n        break;\n      case 401:\n        toast.error(data.title);\n        break;\n      case 403:\n        toast.error(\"You don't have persmission for that action\");\n        break;\n      case 500:\n        history.push({\n          pathname: \"/server-error\",\n          state: { error: data },\n        });\n        break;\n      default:\n        break;\n    }\n    return Promise.reject(error.response);\n  }\n);\n\nconst requests = {\n  get: (url: string, params?: URLSearchParams) => axios.get(url, {params}).then(responseBody),\n  post: (url: string, body: {}) => axios.post(url, body).then(responseBody),\n  put: (url: string, body: {}) => axios.put(url, body).then(responseBody),\n  delete: (url: string) => axios.delete(url).then(responseBody),\n  postForm: (url: string, data: FormData) => axios.post(url, data, {\n    headers: {'Content-type': 'multipart/form-data'}\n  }).then(responseBody),\n  putForm: (url: string, data: FormData) => axios.put(url, data, {\n    headers: {'Content-type': 'multipart/form-data'}\n  }).then(responseBody)\n};\n\nfunction createFormData(item: any) {\n  let formData = new FormData();\n  for (const key in item) {\n    formData.append(key, item[key])\n  }\n  return formData;\n}\n\nconst Admin = {\n  createProduct: (product: any) => requests.postForm('products', createFormData(product)),\n  updateProduct: (product: any) => requests.putForm('products', createFormData(product)),\n  deleteProduct: (id: number) => requests.delete(`products/${id}`)\n}\n\nconst Catalog = {\n  list: (params: URLSearchParams) => requests.get(\"products\", params),\n  details: (id: number) => requests.get(`products/${id}`),\n  fetchFilters: () => requests.get(\"products/filters\")\n};\n\nconst TestErrors = {\n  get400Error: () => requests.get(\"buggy/bad-request\"),\n  get401Error: () => requests.get(\"buggy/unauthorized\"),\n  get404Error: () => requests.get(\"buggy/not-found\"),\n  get500Error: () => requests.get(\"buggy/server-error\"),\n  getValidationError: () => requests.get(\"buggy/validation-error\"),\n};\n\nconst Basket = {\n  get: () => requests.get(\"basket\"),\n  addItem: (productId: number, quantity = 1) =>\n    requests.post(`basket?productId=${productId}&quantity=${quantity}`, {}),\n  removeItem: (productId: number, quantity = 1) =>\n    requests.delete(`basket?productId=${productId}&quantity=${quantity}`),\n};\n\nconst Account = {\n  login: (values: any) => requests.post('account/login', values),\n  register: (values: any) => requests.post('account/register', values),\n  currentUser: () => requests.get('account/currentUser'),\n  fetchAddress: () => requests.get('account/savedAddress')\n}\n\nconst Orders = {\n  list: () => requests.get('orders'),\n  fetch: (id: number) => requests.get(`orders/${id}`),\n  create: (values: any) => requests.post('orders', values)\n}\n\nconst Payments = {\n  createPaymentItent: () => requests.post('payments', {})\n}\n\nconst agent = {\n  Basket,\n  Catalog,\n  TestErrors,\n  Account,\n  Orders,\n  Payments,\n  Admin\n};\n\nexport default agent;\n","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\nimport agent from \"../../app/api/agent\";\nimport { Basket } from \"../../app/models/basket\";\nimport { getCookie } from \"../../app/util/util\";\n\n// any needed interface\ninterface BasketState {\n  basket: Basket | null;\n  status: string;\n}\n\n// Initial State\nconst initialState: BasketState = {\n  basket: null,\n  status: 'idle'\n}\n\n// METHODS for the api calls\nexport const fetchBasketAsync = createAsyncThunk<Basket>(\n  'basket/fetchBasketAsync',\n  async (_, thunkAPI) => {\n    try {\n      return await agent.Basket.get();\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({error: error.data})\n    }\n  },\n  {\n    condition: () => {\n      if (!getCookie('buyerId')) return false;\n    }\n  }\n)\n\nexport const addBasketItemAsync = createAsyncThunk<Basket, {productId: number, quantity?: number}>(\n  'basket/addBasketItemAsync',\n  async ({productId, quantity = 1}, thunkApi) => {\n    try {\n      return await agent.Basket.addItem(productId, quantity)\n    } catch (error: any) {\n      return thunkApi.rejectWithValue({error: error.data});  \n    }\n  }\n)\n\nexport const removeBasketItemAsync = createAsyncThunk<void, {productId: number, quantity: number, name?: string}>(\n  'basket/removeBasketItemAsync',\n  async ({productId, quantity}, thunkApi) => {\n    try {\n      await agent.Basket.removeItem(productId, quantity);\n    } catch (error: any) {\n      return thunkApi.rejectWithValue({error: error.data});\n    }\n  }\n)\n\n// actions w/ reducers (cases)\nexport const basketSlice = createSlice({\n  name: 'basket',\n  initialState,\n  reducers: {\n    setBasket: (state, action) => {\n      state.basket = action.payload\n    },\n    clearBasket: (state) => {\n      state.basket = null;\n    }\n  },\n  extraReducers: (builder => {\n    builder.addCase(addBasketItemAsync.pending, (state, action) => {\n      state.status = 'pendingAddItem' + action.meta.arg.productId;\n    });\n    builder.addCase(removeBasketItemAsync.pending, (state, action) => {\n      state.status = 'pendingRemoveItem' + action.meta.arg.productId + action.meta.arg.name;\n    });\n    builder.addCase(removeBasketItemAsync.fulfilled, (state, action) => {\n      const { productId, quantity} = action.meta.arg;\n      const itemIndex = state.basket?.items.findIndex(i => i.productId === productId);\n      if (itemIndex === -1 || itemIndex === undefined) return;\n      state.basket!.items[itemIndex].quantity -= quantity\n      if (state.basket?.items[itemIndex].quantity === 0)\n        state.basket.items.splice(itemIndex, 1);\n      state.status = 'idle';\n    });\n    builder.addCase(removeBasketItemAsync.rejected, (state, action) => {\n      console.log(action.payload);\n      state.status = 'idle';\n    });\n    builder.addMatcher(isAnyOf(addBasketItemAsync.fulfilled, fetchBasketAsync.fulfilled), (state, action) => {\n      state.basket = action.payload;\n      state.status = 'idle'\n    });\n    builder.addMatcher(isAnyOf(addBasketItemAsync.rejected, fetchBasketAsync.rejected), (state, action) => {\n      console.log(action.payload);\n      state.status = 'idle';\n    });\n  })\n})\n\nexport const {setBasket, clearBasket} = basketSlice.actions;","export  function getCookie(key: string) {\n  const b = document.cookie.match(\"(^|;)\\\\s*\" + key + \"\\\\s*=\\\\s*([^;]+)\")\n  return b ? b.pop() : \"\";\n}","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\nimport { FieldValues } from \"react-hook-form\";\nimport { toast } from \"react-toastify\";\nimport { history } from \"../..\";\nimport agent from \"../../app/api/agent\";\nimport { User } from \"../../app/models/user\";\nimport { setBasket } from \"../basket/basketSlice\";\n\n// necessary interfaces\ninterface AccountState {\n  user: User | null;\n}\n\n// initial state\nconst initialState: AccountState = {\n  user: null\n}\n\n// POST/signin api call\nexport const signInUser = createAsyncThunk<User, FieldValues>(\n  'account/signInUser',\n  async (data, thunkAPI) => {\n    try {\n      const userDto = await agent.Account.login(data);\n      const { basket, ...user} = userDto;\n      if (basket) thunkAPI.dispatch(setBasket(basket));\n      localStorage.setItem('user', JSON.stringify(user));\n      return user;\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({error: error.data})\n    }\n  }\n)\n\n// GET/user api call\nexport const fetchCurrentUser = createAsyncThunk<User>(\n  'account/fetchCurrentUser',\n  async(_, thunkAPI) => {\n    thunkAPI.dispatch(setUser(JSON.parse(localStorage.getItem('user')!)))\n    try {\n      const userDto = await agent.Account.currentUser();\n      const {basket, ...user} = userDto;\n      if (basket) thunkAPI.dispatch(setBasket(basket));\n      localStorage.setItem('user', JSON.stringify(user));\n      return user;\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({error: error.data})\n    }\n  }, \n  {\n    condition: () => {\n      if (!localStorage.getItem('user')) return false;\n    }\n  }\n)\n\n// create slice and reducers\nexport const accountSlice = createSlice({\n  name: 'account',\n  initialState,\n  reducers: {\n    signOut: (state) => {\n      state.user = null;\n      localStorage.removeItem('user');\n      history.push(\"/\");\n    },\n    setUser: (state, action) => {\n      let claims = JSON.parse(atob(action.payload.token.split('.')[1]));\n      let roles = claims['http://schemas.microsoft.com/ws/2008/06/identity/claims/role'];\n      state.user = {...action.payload, roles: typeof(roles) === 'string' ? [roles] : roles}\n    }\n  },\n  extraReducers: (builder => {\n    builder.addCase(fetchCurrentUser.rejected, (state) => {\n      state.user = null;\n      localStorage.removeItem('user');\n      toast.error('Session expired - please login again');\n      history.push(\"/\")\n    })\n    builder.addMatcher(isAnyOf(signInUser.fulfilled, fetchCurrentUser.fulfilled), (state, action) => {\n      let claims = JSON.parse(atob(action.payload.token.split('.')[1]));\n      let roles = claims['http://schemas.microsoft.com/ws/2008/06/identity/claims/role'];\n      state.user = {...action.payload, roles: typeof(roles) === 'string' ? [roles] : roles}\n    });\n    builder.addMatcher(isAnyOf(signInUser.rejected), (state, action) => {\n      throw action.payload;\n    })\n  })\n});\n\nexport const { signOut, setUser } = accountSlice.actions;","import {\n  createAsyncThunk,\n  createEntityAdapter,\n  createSlice,\n} from \"@reduxjs/toolkit\";\nimport agent from \"../../app/api/agent\";\nimport { MetaData } from \"../../app/models/pagination\";\nimport { Product, ProductParams } from \"../../app/models/product\";\nimport { RootState } from \"../../app/store/configureStore\";\n\ninterface CatalogState {\n  productsLoaded: boolean;\n  filtersLoaded: boolean;\n  status: string;\n  brands: string[];\n  types: string[];\n  productParams: ProductParams;\n  metaData: MetaData | null;\n}\n\nconst productsAdapter = createEntityAdapter<Product>();\n\nfunction getAxiosParams(productParams: ProductParams) {\n  const params = new URLSearchParams();\n  params.append('pageNumber', productParams.pageNumber.toString());\n  params.append('pageSize', productParams.pageSize.toString());\n  params.append('orderBy', productParams.orderBy);\n  if (productParams.searchTerm) params.append('searchTerm', productParams.searchTerm);\n  if (productParams.brands?.length > 0) params.append('brands', productParams.brands.toString());\n  if (productParams.types?.length > 0) params.append('types', productParams.types.toString());\n  return params;\n}\n\n// GET/products slice\nexport const fetchProductsAsync = createAsyncThunk<Product[], void, {state: RootState}>(\n  \"catalog/fetchProductsAsync\",\n  async (_, thunkApi) => {\n    const params = getAxiosParams(thunkApi.getState().catalog.productParams);\n    try {\n      const response =  await agent.Catalog.list(params);\n      thunkApi.dispatch(setMetaData(response.metaData));\n      return response.items;\n    } catch (error: any) {\n      return thunkApi.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\n// GET/products/product/id\nexport const fetchSingleProductAsync = createAsyncThunk<Product, number>(\n  \"catalog/fetchSingleProductAsync\",\n  async (productId, thunkApi) => {\n    try {\n      return await agent.Catalog.details(productId);\n    } catch (error: any) {\n      return thunkApi.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\n// GET/filters\nexport const fetchFilters = createAsyncThunk(\n  \"catalog/fetchFilters\",\n  async (__dirname, thunkAPI) => {\n    try {\n      return agent.Catalog.fetchFilters();\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\n// paramenters for the fetching of the products, with pagination\nfunction initParams() {\n  return {\n    pageNumber: 1,\n    pageSize: 8,\n    orderBy: \"name\",\n    brands: [],\n    types: []\n  };\n}\n\n// switch cases -> what were before reducers\nexport const catalogSlice = createSlice({\n  name: \"catalog\",\n  initialState: productsAdapter.getInitialState<CatalogState>({\n    productsLoaded: false,\n    filtersLoaded: false,\n    status: \"idle\",\n    brands: [],\n    types: [],\n    productParams: initParams(),\n    metaData: null\n  }),\n  reducers: {\n    setProductParams: (state, action) => {\n      state.productsLoaded = false;\n      state.productParams = { ...state.productParams, ...action.payload, pageNumber: 1 };\n    },\n    setPageNumber: (state, action) => {\n      state.productsLoaded = false;\n      state.productParams = {...state.productParams, ...action.payload}\n    },\n    setMetaData: (state, action) => {\n      state.metaData = action.payload\n    },\n    resetProductParams: (state) => {\n      state.productParams = initParams();\n    },\n    setProduct: (state, action) => {\n      productsAdapter.upsertOne(state, action.payload);\n      state.productsLoaded = false;\n    },\n    removeProduct: (state, action) => {\n      productsAdapter.removeOne(state, action.payload);\n      state.productsLoaded = false;\n    }\n  },\n  extraReducers: (builder) => {\n    builder.addCase(fetchProductsAsync.pending, (state) => {\n      state.status = \"pendingFetchProducts\";\n    });\n    builder.addCase(fetchProductsAsync.fulfilled, (state, action) => {\n      productsAdapter.setAll(state, action.payload);\n      state.status = \"idle\";\n      state.productsLoaded = true;\n    });\n    builder.addCase(fetchProductsAsync.rejected, (state, action) => {\n      console.log(action.payload);\n      state.status = \"idle\";\n    });\n    builder.addCase(fetchSingleProductAsync.pending, (state) => {\n      state.status = \"pendingFetchProduct\";\n    });\n    builder.addCase(fetchSingleProductAsync.fulfilled, (state, action) => {\n      productsAdapter.upsertOne(state, action.payload);\n      state.status = \"idle\";\n    });\n    builder.addCase(fetchSingleProductAsync.rejected, (state, action) => {\n      console.log(action);\n      state.status = \"idle\";\n    });\n    builder.addCase(fetchFilters.pending, (state) => {\n      state.status = \"pendingFetchFilters\";\n    });\n    builder.addCase(fetchFilters.fulfilled, (state, action) => {\n      state.status = \"idle\";\n      state.brands = action.payload.brands;\n      state.types = action.payload.types;\n      state.filtersLoaded = true;\n    });\n    builder.addCase(fetchFilters.rejected, (state, action) => {\n      state.status = \"idle\";\n      console.log(action.payload);\n    });\n  },\n});\n\nexport const productSelectors = productsAdapter.getSelectors(\n  (state: RootState) => state.catalog\n);\n\nexport const {setProductParams, removeProduct, resetProductParams, setMetaData, setPageNumber, setProduct} = catalogSlice.actions;","import { createSlice } from \"@reduxjs/toolkit\"\n\nexport interface CounterState {\n  data: number;\n  title: string;\n}\n\nconst initialState: CounterState = {\n  data: 42,\n  title: \"REACT EXAMPLE REDUX TOOL KIT\"\n}\n\nexport const counterSlice = createSlice({\n  name: 'counter',\n  initialState,\n  reducers: {\n    increment: (state, action) => {\n      state.data += action.payload\n    },\n    decrement: (state, action) => {\n      state.data -= action.payload\n    }\n  }\n})\n\nexport const {increment, decrement} = counterSlice.actions;","import { configureStore } from \"@reduxjs/toolkit\";\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { accountSlice } from \"../../features/account/accountSlice\";\nimport { basketSlice } from \"../../features/basket/basketSlice\";\nimport { catalogSlice } from \"../../features/catalog/catalogSlice\";\nimport { counterSlice } from \"../../features/contact/counterSlice\";\n\n// export function configureStore() {\n//   return createStore(counterReducer);\n// }\n\nexport const store = configureStore({\n  reducer: {\n    counter: counterSlice.reducer,\n    basket: basketSlice.reducer,\n    catalog: catalogSlice.reducer,\n    account: accountSlice.reducer\n  }\n})\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import { useEffect } from 'react';\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\nimport { fetchFilters, fetchProductsAsync, productSelectors } from '../../features/catalog/catalogSlice';\n\n\nexport default function useProducts() {\n  \n    const products = useAppSelector(productSelectors.selectAll);\n    const { productsLoaded, filtersLoaded, brands, types, metaData} = useAppSelector(state => state.catalog);\n    const dispatch = useAppDispatch();\n  \n    useEffect(() => {\n      if (!productsLoaded) dispatch(fetchProductsAsync());\n    }, [productsLoaded, dispatch])\n  \n    useEffect(() => {\n      if (!filtersLoaded) dispatch(fetchFilters());\n    }, [dispatch, filtersLoaded])\n    \n    return {\n      products,\n      productsLoaded,\n      filtersLoaded,\n      brands,\n      types,\n      metaData\n    }\n}\n","import { Backdrop, Box, CircularProgress, Typography } from \"@mui/material\";\n\ninterface Props {\n  message?: string;\n}\n\nexport default function Loader({message = \"Loading...\"}: Props) {\n  return (\n    <Backdrop open={true} invisible={true}>\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100vh\">\n        <CircularProgress size={100} color=\"secondary\"/>\n        <Typography \n          variant=\"h4\" \n          sx={{justifyContent: 'center', position: 'fixed', top: '60%'}}\n        >\n          {message}\n        </Typography>\n      </Box>\n    </Backdrop>\n  )\n}\n","import { Product } from \"../../app/models/product\";\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Typography\n} from \"@mui/material\";\n\nimport FavoriteIcon from '@mui/icons-material/Favorite'\nimport { Link } from \"react-router-dom\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { addBasketItemAsync } from \"../basket/basketSlice\";\n\ninterface Props {\n  product: Product;\n}\n\nexport default function ProductCard({ product }: Props) {\n  const { status } = useAppSelector(state => state.basket);\n  const dispatch = useAppDispatch();\n\n\n  return (\n    <Card >\n      <CardMedia\n        sx={{ height: 140 }}\n        image={product.pictureUrl}\n      />\n      <CardContent>\n        <Typography sx={{textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: \"nowrap\"}} gutterBottom variant=\"h5\" component=\"div\">\n          {product.name}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          {product.brand} / {product.type} \n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          ${product.price.toFixed(2)}\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <LoadingButton \n          loading={status.includes('pendingAddItem' + product.id)} \n          onClick={() => dispatch(addBasketItemAsync({ productId: product.id }))} \n          size=\"small\"\n        >\n          <FavoriteIcon />\n        </LoadingButton>\n        <Button component={Link} to={`/catalog/${product.id}`} size=\"small\">View</Button>\n      </CardActions>\n    </Card>\n  )\n}","import { Card, CardActions, CardContent, Grid, Skeleton } from '@mui/material'\n\nexport default function ProductCardSeketon() {\n  return (\n    <Grid item xs component={Card}>\n      <Skeleton sx={{height: 190}} animation=\"wave\" variant=\"rectangular\" />\n      <CardContent>\n        <>\n          <Skeleton animation=\"wave\" height={10} style={{marginBottom: 6}}/>\n          <Skeleton animation=\"wave\" height={10} width=\"80%\"/>\n        </>\n      </CardContent>\n      <CardActions>\n        <>\n          <Skeleton animation=\"wave\" height={10} width=\"40%\" />\n          <Skeleton animation=\"wave\" height={10} width=\"20%\" />\n        </>\n      </CardActions>\n    </Grid>\n  )\n}\n","import { Grid } from \"@mui/material\";\nimport { Product } from \"../../app/models/product\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport ProductCard from \"./ProductCard\";\nimport ProductCardSeketon from \"./ProductCardSeketon\";\n\ninterface Props {\n  products: Product[];\n}\n\nexport default function ProductList({ products }: Props) {\n  const {productsLoaded} = useAppSelector(state => state.catalog);\n  return (\n    <Grid sx={{mb: 4}} container spacing={4}>\n      {products.map((product) => (\n        <Grid key={product.id} item xs={12} sm={6} md={4} lg={3}>\n          {!productsLoaded ? (\n            <ProductCardSeketon />\n          ) : (\n            <ProductCard  product={product} />\n          )}\n        </Grid>\n      ))}\n    </Grid>\n  )\n}\n","import { debounce, TextField } from \"@mui/material\";\nimport { useState } from \"react\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { setProductParams } from \"./catalogSlice\";\n\nexport default function ProductSearch() {\n  const { productParams} = useAppSelector(state => state.catalog);\n  const [searchTerm , setSearchTerm] = useState(productParams.searchTerm);\n  const dispatch = useAppDispatch();\n\n  const debouncedSearch = debounce((event: any) => {\n    dispatch(setProductParams({searchTerm: event.target.value}))\n  }, 1000);\n\n  return (\n    <TextField\n      label=\"Search products\"\n      variant=\"outlined\"\n      fullWidth\n      value={searchTerm || ''}\n      onChange={(event: any) => {\n        setSearchTerm(event.target.value);\n        debouncedSearch(event);\n      }}\n    />\n  )\n}","import { Grid, Paper } from \"@mui/material\";\nimport AppPagination from \"../../app/components/AppPagination\";\nimport CheckboxButtons from \"../../app/components/CheckboxButtons\";\nimport RadioButtonGroup from \"../../app/components/RadioButton\";\nimport useProducts from \"../../app/hooks/useProducts\";\nimport Loader from \"../../app/layout/Loader\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { setPageNumber, setProductParams } from \"./catalogSlice\";\nimport ProductList from \"./ProductList\";\nimport ProductSearch from \"./ProductSearch\";\n\nconst sortOptions = [\n  { value: 'name', label: \"Alphabetical\" },\n  { value: 'priceDesc', label: \"Price - High to low\" },\n  { value: 'priceAsc', label: \"Price - Low to high\" }\n]\n\nexport default function Catalog() {\n  const { products, brands, types, filtersLoaded, metaData } = useProducts();\n  const { productParams } = useAppSelector(state => state.catalog);\n  const dispatch = useAppDispatch();\n\n  if (!filtersLoaded) return <Loader message=\"Getting Products\" />;\n\n  return (\n    <Grid container columnSpacing={4}>\n      <Grid item xs={12} sm={12} md={3} lg={3}>\n        <Paper sx={{ mb: 2 }}>\n          <ProductSearch />\n        </Paper>\n        <Paper sx={{ mb: 2, p: 2 }}>\n          <RadioButtonGroup\n            selectedValue={productParams.orderBy}\n            options={sortOptions}\n            onChange={(e) => dispatch(setProductParams({ orderBy: e.target.value }))}\n          />\n        </Paper>\n        <Paper sx={{ mb: 2, p: 2 }}>\n          <CheckboxButtons\n            items={brands}\n            checked={productParams.brands}\n            onChange={(items: string[]) => dispatch(setProductParams({ brands: items }))}\n          />\n        </Paper>\n        <Paper sx={{ mb: 2, p: 2 }}>\n          <CheckboxButtons\n            items={types}\n            checked={productParams.types}\n            onChange={(items: string[]) => dispatch(setProductParams({ types: items }))}\n          />\n        </Paper>\n      </Grid>\n      <Grid item xs={9} >\n        <ProductList products={products} />\n      </Grid>\n      <Grid item xs={3} />\n      <Grid item xs={9} sx={{ mb: 2, mt: -5 }}>\n        {metaData &&\n          <AppPagination\n            metaData={metaData}\n            onPageChange={(page: number) => dispatch(setPageNumber({ pageNumber: page }))}\n          />\n        }\n      </Grid>\n    </Grid>\n  );\n\n}","import { Button, Fade, Menu, MenuItem } from \"@mui/material\";\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { signOut } from \"../../features/account/accountSlice\";\nimport { clearBasket } from \"../../features/basket/basketSlice\";\nimport { useAppDispatch, useAppSelector } from \"../store/configureStore\";\n\nexport default function SignedInMenu() {\n  const dispatch = useAppDispatch();\n  const {user} = useAppSelector(state => state.account)\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleClick = (event:any) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <>\n      <Button \n        color=\"inherit\"\n        onClick={handleClick}\n        sx={{typography: 'h6', textTransform: 'lowercase'}}\n      >\n        {user?.email.toLowerCase()}\n      </Button>\n      <Menu\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        TransitionComponent={Fade}\n      >\n        <MenuItem onClick={handleClose}>Profile</MenuItem>\n        <MenuItem component={Link} to='/orders'>My orders</MenuItem>\n        <MenuItem onClick={() => {\n          dispatch(signOut());\n          dispatch(clearBasket());\n        }}>Logout</MenuItem>\n      </Menu>\n    </>\n  )\n}\n","import { ShoppingCart } from \"@mui/icons-material\";\nimport { AppBar, Badge, Box, IconButton, List, ListItem, Switch, Toolbar, Typography } from \"@mui/material\";\nimport { Link, NavLink } from \"react-router-dom\";\nimport { useAppSelector } from \"../store/configureStore\";\nimport SignedInMenu from \"./SignedInMenu\";\n\ninterface Props {\n  state: boolean;\n  changeMode: () => void;\n}\n\nconst midLinks = [\n  { title: 'Home', path: '/' },\n]\n\nconst rightLinks = [\n  { title: 'login', path: '/login' },\n  { title: 'register', path: '/register' },\n]\n\nconst navStyles = {\n  typography: 'h8',\n  color: 'inherit',\n  textDecoration: 'none',\n  '&:hover': {\n    color: '#26c6da'\n  },\n  '&.active': {\n    color: \"text.secondary\"\n  }\n}\n\nexport default function Header({ changeMode, state }: Props) {\n  const { basket } = useAppSelector(state => state.basket);\n  const { user } = useAppSelector(state => state.account);\n  const itemCount = basket?.items.reduce((acc, item) => acc + item.quantity, 0);\n\n  return (\n    <AppBar position='static' sx={{ mb: 4 }}>\n      <Toolbar sx={{ display: \"flex\", justifyContent: \"space-between\", alignContent: \"center\" }}>\n        <Box display=\"flex\" alignItems=\"center\">\n          <Typography variant='h6' component={NavLink} to=\"/\" sx={navStyles}>\n            React Store\n          </Typography>\n          <Switch onChange={changeMode} checked={state} color=\"default\" />\n        </Box>\n        <List sx={{ display: 'flex' }}>\n          {midLinks.map(({ title, path }) => (\n            <ListItem\n              component={NavLink}\n              to={path}\n              key={path}\n              sx={navStyles}\n            >\n              {title}\n            </ListItem>\n          ))}\n          {user && user.roles?.includes('Admin') &&\n            <ListItem\n                component={NavLink}\n                to=\"/inventory\"\n                sx={navStyles}\n              >\n                Inventory\n            </ListItem>\n          }\n        </List>\n        <Box display=\"flex\" alignItems=\"center\">\n          <IconButton component={Link} to=\"/basket\" size='large' sx={{ color: 'inherit' }}>\n            <Badge badgeContent={itemCount} color='secondary'>\n              <ShoppingCart />\n            </Badge>\n          </IconButton>\n\n          {user ? (\n            <SignedInMenu />\n          ) : (\n            <List sx={{ display: 'flex' }}>\n              {rightLinks.map(({ title, path }) => (\n                <ListItem\n                  component={NavLink}\n                  to={path}\n                  key={path}\n                  sx={navStyles}\n                >\n                  {title}\n                </ListItem>\n              ))}\n            </List>\n          )}\n        </Box>\n      </Toolbar>\n    </AppBar>\n  )\n}","import { Button, Container, Divider, Paper, Typography } from '@mui/material'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nexport default function ServerError() {\n  const history = useHistory();\n  const {state} = useLocation<any>();\n\n  return (\n    <Container component={Paper}>\n      {state?.error ? (\n        <>\n          <Typography variant=\"h3\" color=\"error\" gutterBottom>{state.error.title}</Typography>\n          <Divider />\n          <Typography>{state.error.detail || 'Internal Server error'}</Typography>\n        </>\n      ) : (\n        <Typography>Server Error</Typography>\n      )}\n      <Button onClick={() => history.push('/')}></Button>\n    </Container>\n  )\n}\n","import { Button, Container, Divider, Paper, Typography } from \"@mui/material\"\nimport { Link } from \"react-router-dom\"\n\nexport default function NotFound() {\n  return (\n    <Container component={Paper} sx={{height: 400}}>\n      <Typography gutterBottom variant='h3'>\n        Opps - we couldn't find what you were looking for\n      </Typography>\n      <Divider/>\n      <Button fullWidth component={Link} to=\"/\">\n        Go Back to Shop\n      </Button>\n    </Container>\n  )\n}","import { LoadingButton } from '@mui/lab';\nimport { Divider, Grid, Table, TableBody, TableCell, TableContainer, TableRow, TextField, Typography } from '@mui/material'\nimport { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom';\nimport NotFound from '../../app/errors/NotFound';\nimport Loader from '../../app/layout/Loader';\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\nimport { addBasketItemAsync, removeBasketItemAsync } from '../basket/basketSlice';\nimport { fetchSingleProductAsync, productSelectors } from './catalogSlice';\n\nexport default function ProductDetailsPage() {\n  const {basket, status} = useAppSelector(state => state.basket);\n  const dispatch = useAppDispatch();\n  const {status: productStatus} = useAppSelector(state => state.catalog)\n  const {id} = useParams<{id: string}>();\n  const product = useAppSelector(state => productSelectors.selectById(state, id));\n  const [quantity, setQuantity] = useState(0);\n  const item = basket?.items.find(i => i.productId === product?.id);\n\n  useEffect(() => {\n    if (item) setQuantity(item.quantity);\n    if (!product) dispatch(fetchSingleProductAsync(parseInt(id)))\n  }, [id, item, dispatch, product])\n\n  function handleInputChange(event: any) {\n    if (event.target.value >= 0) {\n      setQuantity(parseInt(event.target.value));\n    }\n  }\n\n  function handleUpdateCard() {\n    if (!item || quantity > item.quantity) {\n      const updatedQuantity = item ? quantity - item.quantity : quantity;\n      dispatch(addBasketItemAsync({productId: product?.id!, quantity: updatedQuantity}))\n    } else {\n      const updatedQuantity = item.quantity - quantity;\n      dispatch(removeBasketItemAsync({productId: product?.id!, quantity: updatedQuantity}))\n    }\n  }\n\n  if (productStatus.includes('pending')) return <Loader message=\"Getting Product\"/>;\n\n  if (!product) return <NotFound/>\n\n  return (\n    <Grid container spacing={6}>\n      <Grid item xs={6}>\n        <img src={product.pictureUrl} alt={product.name} style={{width: '100%'}}/>\n      </Grid>\n      <Grid item xs={6}>\n        <Typography variant='h3'>{product.name}</Typography>\n        <Divider sx={{mb: 2}}></Divider>\n        <Typography variant='h4'>${product.price}</Typography>\n        <TableContainer>\n          <Table>\n            <TableBody>\n              <TableRow>\n                <TableCell>Name</TableCell>\n                <TableCell>{product.name}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Description</TableCell>\n                <TableCell>{product.description}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Type</TableCell>\n                <TableCell>{product.type}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Brand</TableCell>\n                <TableCell>{product.brand}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Quantity</TableCell>\n                <TableCell>{product.quantityInStock}</TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <Grid container spacing={2}>\n          <Grid item xs={6}>\n            <TextField\n              onChange={handleInputChange}\n              variant=\"outlined\"\n              type=\"number\"\n              label=\"Quantity in Cart\"\n              fullWidth\n              value={quantity}\n            />\n          </Grid>\n          <Grid item xs={6}>\n            <LoadingButton\n              disabled={item?.quantity === quantity || (!item && quantity === 0)}\n              loading={status.includes('pending')}\n              onClick={handleUpdateCard}\n              sx={{height: '55px'}}\n              color=\"primary\"\n              size=\"large\"\n              variant=\"contained\"\n              fullWidth\n            >\n              {item ? 'Update Quantity' : 'Add to Cart'}\n            </LoadingButton>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  )\n}\n","import { Paper, Table, TableBody, TableCell, TableContainer, TableRow } from \"@mui/material\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\n\ninterface Props {\n  subtotal?: number;\n}\n\nexport default function BasketSummary({subtotal}: Props) {\n  const {basket} = useAppSelector(state => state.basket)\n  if (subtotal === undefined) {\n    subtotal = basket?.items.reduce((sum, item) => sum + (item.quantity * item.price), 0) ?? 0;\n  }\n  const deliveryFee = subtotal > 100 ? 0 : 10;\n\n  return (\n    <>\n      <TableContainer component={Paper} variant={'outlined'}>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell colSpan={2}>Subtotal</TableCell>\n              <TableCell align=\"right\">${subtotal}</TableCell>\n            </TableRow> \n            <TableRow>\n              <TableCell colSpan={2}>Delivery fee*</TableCell>\n              <TableCell align=\"right\">${deliveryFee}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell colSpan={2}>Total</TableCell>\n              <TableCell align=\"right\">${subtotal ? subtotal + deliveryFee : deliveryFee}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell style={{fontStyle: 'italic'}}>*Orders over $100 qualify for free delivery</TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </>\n  )\n}\n\n","import { Remove, Add, Delete } from \"@mui/icons-material\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody, Box } from \"@mui/material\";\nimport { BasketItem } from \"../../app/models/basket\";\nimport { useAppSelector, useAppDispatch } from \"../../app/store/configureStore\";\nimport { removeBasketItemAsync, addBasketItemAsync } from \"./basketSlice\";\n\ninterface Props {\n  items: BasketItem[];\n  isBasket?: boolean;\n}\n\nexport default function BasketTable({items, isBasket = true}: Props) {\n  const { status } = useAppSelector(state => state.basket);\n  const dispatch = useAppDispatch();\n  \n  return (\n    <TableContainer component={Paper}>\n        <Table sx={{ minWidth: 650 }} >\n          <TableHead>\n            <TableRow>\n              <TableCell>Product</TableCell>\n              <TableCell align=\"right\">Price</TableCell>\n              <TableCell align=\"center\">Quantity</TableCell>\n              <TableCell align=\"right\">Sub Total</TableCell>\n              {isBasket && \n                <TableCell align=\"right\"></TableCell>\n              }\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {items.map((item) => (\n\n              <TableRow\n                key={item.productId}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n              >\n                <TableCell>\n                  <Box display=\"flex\" alignItems=\"center\">\n                    <img src={item.pictureUrl} alt={item.name} style={{ height: 50, marginRight: 20 }} />\n                    <span>{item.name}</span>\n                  </Box>\n                </TableCell>\n                <TableCell align=\"right\">${item.price}</TableCell>\n                <TableCell align=\"center\">\n                  {isBasket && \n                    <LoadingButton\n                      loading={status === 'pendingRemoveItem' + item.productId + 'rem'}\n                      onClick={() => dispatch(removeBasketItemAsync({ productId: item.productId, quantity: 1, name: 'rem' }))}\n                      color=\"error\"\n                    >\n                      <Remove />\n                    </LoadingButton>\n                  }\n                  {item.quantity}\n                  {isBasket && \n                    <LoadingButton\n                      loading={status === 'pendingAddItem' + item.productId}\n                      onClick={() => dispatch(addBasketItemAsync({ productId: item.productId }))}\n                      color=\"secondary\"\n                    >\n                      <Add />\n                    </LoadingButton>\n                  }\n                </TableCell>\n                <TableCell align=\"right\">${item.price * item.quantity}</TableCell>\n                {isBasket && \n                  <TableCell align=\"right\">\n                    <LoadingButton\n                      loading={status === 'pendingRemoveItem' + item.productId + 'del'}\n                      onClick={() => dispatch(removeBasketItemAsync({ productId: item.productId, quantity: item.quantity, name: 'del' }))}\n                      color=\"error\"\n                    >\n                      <Delete />\n                    </LoadingButton>\n                  </TableCell>\n                }\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n  )\n}\n","import { Link } from 'react-router-dom'\nimport { Button, Grid, Typography } from \"@mui/material\";\nimport BasketSummary from \"./BasketSummary\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport BasketTable from './BasketTable';\n\nexport default function BasketPage() {\n  const { basket } = useAppSelector(state => state.basket);\n\n  if (!basket) return <Typography variant=\"h3\">Your Basket is empty</Typography>\n\n  return (\n    <>\n      <BasketTable items={basket.items} />\n      <Grid container>\n        <Grid item xs={6} />\n        <Grid item xs={6} >\n          <BasketSummary />\n          <Button\n            component={Link}\n            to=\"/checkout\"\n            variant=\"contained\"\n            size=\"large\"\n            fullWidth\n          >\n            Checkout\n          </Button>\n        </Grid>\n\n      </Grid>\n    </>\n  )\n}\n","import Avatar from '@mui/material/Avatar';\nimport TextField from '@mui/material/TextField';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport { Paper } from '@mui/material';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { FieldValues, useForm } from 'react-hook-form';\nimport { LoadingButton } from '@mui/lab';\nimport { useAppDispatch } from '../../app/store/configureStore';\nimport { signInUser } from './accountSlice';\n\nexport default function Login() {\n  const history = useHistory();\n  const location = useLocation<any>();\n  const dispatch = useAppDispatch();\n  const { register, handleSubmit, formState: {isSubmitting, errors, isValid}} = useForm({\n    mode: 'all'\n  });\n\n  async function submitForm(data: FieldValues) {\n    try {\n      await dispatch(signInUser(data));\n      history.push(location.state?.from?.pathname || \"/\")\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  \n  return (\n    <Container\n      component={Paper}\n      maxWidth=\"sm\"\n      sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', p: 4 }}\n    >\n      <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\n        <LockOutlinedIcon />\n      </Avatar>\n      <Typography component=\"h1\" variant=\"h5\">\n        Sign in\n      </Typography>\n      <Box component=\"form\" onSubmit={handleSubmit(submitForm)} noValidate sx={{ mt: 1 }}>\n        <TextField\n          {...register('username', {required: 'Username is required'})}\n          error={!!errors.username}\n          helperText={errors?.username?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Username\"\n          autoFocus\n          />\n        <TextField\n          {...register('password', {required: 'Password is required'})}\n          error={!!errors.password}\n          helperText={errors?.password?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Password\"\n          type=\"password\"\n          autoComplete=\"current-password\"\n        />\n        <LoadingButton\n          disabled={!isValid}\n          loading={isSubmitting}\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          sx={{ mt: 3, mb: 2 }}\n        >\n          Sign In\n        </LoadingButton>\n        <Grid container>\n          <Grid item>\n            <Link to=\"/register\">\n              {\"Don't have an account? Sign Up\"}\n            </Link>\n          </Grid>\n        </Grid>\n      </Box>\n    </Container>\n  );\n}","import Avatar from '@mui/material/Avatar';\nimport TextField from '@mui/material/TextField';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport { Paper } from '@mui/material';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { LoadingButton } from '@mui/lab';\nimport agent from '../../app/api/agent';\nimport { toast } from 'react-toastify';\n\nexport default function Register() {\n  const history = useHistory();\n  const { register, handleSubmit, setError, formState: { isSubmitting, errors, isValid } } = useForm({\n    mode: 'all'\n  });\n\n  function handleApiErrors(errors: any) {\n    if (errors) {\n      errors.forEach((error: string) => {\n        if (error.includes('Password')) {\n          setError('password', {message: error});\n        } else if (error.includes('Email')) {\n          setError('email', {message: error});\n        } else if ('Username') {\n          setError('username', {message: error});\n        }\n      })\n    }\n  }\n\n  return (\n    <Container\n      component={Paper}\n      maxWidth=\"sm\"\n      sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', p: 4 }}\n    >\n      <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\n        <LockOutlinedIcon />\n      </Avatar>\n      <Typography component=\"h1\" variant=\"h5\">\n        Register\n      </Typography>\n      <Box component=\"form\" onSubmit={handleSubmit(data => {\n        agent.Account.register(data)\n          .then(() => { \n            toast.success(\"Succesfully Registered\");\n            history.push(\"/login\")\n          })\n          .catch(error => handleApiErrors(error))\n      })} noValidate sx={{ mt: 1 }}>\n        <TextField\n          {...register('username', { required: 'Username is required' })}\n          error={!!errors.username}\n          helperText={errors?.username?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Username\"\n          autoFocus\n        />\n        <TextField\n          {...register('email', { \n            required: 'Email is required',\n            pattern: {\n              value: /^\\w+[\\w-.]*@\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$/,\n              message: 'Not a valid email address'\n            }\n          })}\n          error={!!errors.email}\n          helperText={errors?.email?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Email\"\n        />\n        <TextField\n          {...register('password', { \n            required: 'Password is required',\n            pattern: {\n              value: /(?=^.{6,10}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*\\s).*$/,\n              message: \"Password needs to be 6-10 characteres long with a symbol and capital letter\"\n            }\n          })}\n          error={!!errors.password}\n          helperText={errors?.password?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Password\"\n          type=\"password\"\n          autoComplete=\"current-password\"\n        />\n \n        <LoadingButton\n          disabled={!isValid}\n          loading={isSubmitting}\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          sx={{ mt: 3, mb: 2 }}\n        >\n          Register\n        </LoadingButton>\n        <Grid container>\n          <Grid item>\n            <Link to=\"/login\">\n              {\"Already have an account? Sign Up\"}\n            </Link>\n          </Grid>\n        </Grid>\n      </Box>\n    </Container>\n  );\n}","import { ComponentType } from \"react\";\nimport { Redirect, Route, RouteComponentProps, RouteProps } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useAppSelector } from \"../store/configureStore\";\n\ninterface Props extends RouteProps {\n  component: ComponentType<RouteComponentProps<any>> | ComponentType<any>\n  roles?: string[];\n}\n\nexport default function PrivateRoute({ component: Component, roles, ...rest }: Props) {\n  const { user } = useAppSelector(state => state.account);\n\n  return (\n    <Route {...rest} render={props => {\n      if (!user) {\n          return <Redirect to={{ pathname: \"/login\", state: { from: props.location } }} />  \n      }\n      if (roles && !roles?.some(r => user?.roles?.includes(r))) {\n        toast.error(\"You don't possess access for this area \")\n        return <Redirect to={{ pathname: \"/catalog\", state: { from: props.location } }} />  \n      }\n\n      return <Component {...props} />\n    }}/>\n  );\n}\n","import { Box, Button, Grid, Typography } from \"@mui/material\";\nimport { BasketItem } from \"../../app/models/basket\";\nimport { Order } from \"../../app/models/order\";\nimport BasketSummary from \"../basket/BasketSummary\";\nimport BasketTable from \"../basket/BasketTable\";\n\ninterface Props {\n  order: Order;\n  setSelectedOrder: (id: number) => void;\n}\n\nexport default function OrderDetail({order, setSelectedOrder}: Props) {\n  const subtotal = order.orderItems.reduce((acc, item) => acc + (item.price * item.quantity), 0) ?? 0;\n\n  return (\n    <>\n      <Box display=\"flex\" justifyContent=\"space-between\">\n        <Typography sx={{p: 2}} gutterBottom variant=\"h4\">Order# {order.id} - {order.orderStatus}</Typography>\n        <Button onClick={() => setSelectedOrder(0)} sx={{m: 2}} size=\"large\" variant=\"contained\">\n          Back To Orders\n        </Button>\n      </Box>\n      <BasketTable items={order.orderItems as BasketItem[]} isBasket={false} />\n      <Grid container>\n        <Grid item xs={6} />\n        <Grid item xs={6}>\n          <BasketSummary subtotal={subtotal} />\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import { TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody, Button } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport agent from \"../../app/api/agent\";\nimport Loader from \"../../app/layout/Loader\";\nimport { Order } from \"../../app/models/order\";\nimport OrderDetail from \"./OrderDetail\";\n\nexport default function Orders() {\n  const [orders, setOrders] = useState<Order[] | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedOrderNumber, setSelectedorderNumber] = useState(0);\n\n  useEffect(() => {\n    agent.Orders.list()\n      .then(orders => setOrders(orders))\n      .catch(error => console.log(error))\n      .finally(() => setLoading(false))\n  }, [])\n\n  if (selectedOrderNumber > 0) return (\n    <OrderDetail \n      order={orders?.find(o => o.id === selectedOrderNumber)!}\n      setSelectedOrder={setSelectedorderNumber}\n    />\n  )\n\n  if (loading) return <Loader message=\"Loading Orders...\"/>\n\n  return (\n    <TableContainer component={Paper}>\n      <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n        <TableHead>\n          <TableRow>\n            <TableCell>Order Number</TableCell>\n            <TableCell align=\"right\">Total</TableCell>\n            <TableCell align=\"right\">Order Date</TableCell>\n            <TableCell align=\"right\">Order Status</TableCell>\n            <TableCell align=\"right\"></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {orders?.map((order) => (\n            <TableRow\n              key={order.id}\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n            >\n              <TableCell component=\"th\" scope=\"row\">\n                {order.id}\n              </TableCell>\n              <TableCell align=\"right\">${(order.total).toFixed(2)}</TableCell>\n              <TableCell align=\"right\">{order.orderDate.split('T')[0]}</TableCell>\n              <TableCell align=\"right\">{order.orderStatus}</TableCell>\n              <TableCell align=\"right\">\n                <Button onClick={() => setSelectedorderNumber(order.id)}>\n                  View\n                </Button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import { Checkbox, FormControlLabel } from \"@mui/material\";\nimport { useController, UseControllerProps } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {\n  label: string;\n  disabled: boolean;\n}\n\nexport default function AppCheckbox(props: Props) {\n  const { field } = useController({...props, defaultValue: false});\n  \n  return (\n    <FormControlLabel\n      control={\n        <Checkbox\n          {...field}\n          checked={field.value}\n          color='secondary'\n          disabled={props.disabled}\n        />\n      }   \n      label={props.label}\n    />\n  )\n}","import { TextField } from \"@mui/material\";\nimport { useController, UseControllerProps } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {\n  label: string;\n  mulitline?: boolean;\n  rows?: number;\n  type?: string;\n}\n\nexport default function AppTextInput(props: Props) {\n  const { fieldState, field} = useController({...props, defaultValue: ''})\n  return (\n    <TextField\n      multiline={props.mulitline}\n      rows={props.rows}\n      type={props.type}\n      {...props}\n      {...field}\n      fullWidth\n      variant='outlined'\n      error={!!fieldState.error}\n      helperText={fieldState.error?.message}\n    />\n  )\n}"," import { Button, Grid, Typography } from \"@mui/material\";\nimport { useFormContext } from \"react-hook-form\";\nimport AppCheckbox from \"../../app/components/AppCheckbox\";\nimport AppTextInput from \"../../app/components/AppTextInput\";\n\nexport default function AddressForm() {\n  const {control, formState } = useFormContext();\n\n  return (\n    <>\n      <Typography>\n        Shipping Address\n      </Typography>\n      \n        <Grid container spacing={3}>\n          <Grid item xs={12} sm={12}>\n            <AppTextInput control={control} name=\"fullName\" label=\"Full name\"/>\n          </Grid>\n          <Grid item xs={12}>\n            <AppTextInput control={control} name=\"address1\" label=\"Address 1\"/>\n          </Grid>\n          <Grid item xs={12}>\n            <AppTextInput control={control} name=\"address2\" label=\"Address 2\"/>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput control={control} name=\"city\" label=\"City\"/>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput control={control} name=\"state\" label=\"State\"/>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput control={control} name=\"country\" label=\"Country\"/>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput control={control} name=\"zip\" label=\"Zip\"/>\n          </Grid>\n          <Grid item xs={12}>\n            <AppCheckbox disabled={!formState.isDirty} name='saveAddress' label='Save this as the default address' control={control} />\n          </Grid>\n        </Grid>\n        <Button>Submit Form</Button>\n    </>\n  )\n}\n","import { InputBaseComponentProps } from \"@mui/material\";\nimport { forwardRef, Ref, useImperativeHandle, useRef } from \"react\";\n\ninterface Props extends InputBaseComponentProps {\n\n}\n\nexport const StripeInput = forwardRef(function StripeInput({\n  component: Component, ...props\n}: Props, ref: Ref<unknown>) {\n    const elementRef = useRef<any>();\n    useImperativeHandle(ref, () => ({\n      focus: () => elementRef.current.focus\n    }));\n    return (\n      <Component\n        onReady={(element: any) => elementRef.current = element}\n        {...props}\n      />\n      \n    )\n});","import { Grid, TextField, Typography } from \"@mui/material\";\nimport {\n  CardCvcElement,\n  CardExpiryElement,\n  CardNumberElement,\n} from \"@stripe/react-stripe-js\";\nimport { StripeElementType } from \"@stripe/stripe-js\";\n\nimport { useFormContext } from \"react-hook-form\";\nimport AppTextInput from \"../../app/components/AppTextInput\";\nimport { StripeInput } from \"./StripeInput\";\n\ninterface Props {\n  card: {elementError: {[key in StripeElementType]?: string}};\n  onCardInputChange: (event: any) => void;\n}\n\nexport default function PaymentForm({card, onCardInputChange}: Props) {\n  const { control } = useFormContext();\n  \n  return (\n    <>\n      <Typography variant=\"h6\" gutterBottom>\n        Payment Method\n      </Typography>\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={6}>\n          <AppTextInput\n            name=\"nameOnCard\"\n            label=\"Name on card\"\n            control={control}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!card.elementError.cardNumber}\n            helperText={card.elementError.cardNumber}\n            id=\"cardNumber\"\n            label=\"Card Number\"\n            fullWidth\n            autoComplete=\"cc-number\"\n            variant=\"outlined\"\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardNumberElement,\n              },\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!card.elementError.cardCvc}\n            helperText={card.elementError.cardExpiry}\n            id=\"expDate\"\n            label=\"Expiry Date\"\n            fullWidth\n            autoComplete=\"cc-exp\"\n            variant=\"outlined\"\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardExpiryElement,\n              },\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!card.elementError.cardCvc}\n            helperText={card.elementError.cardCvc}\n            id=\"cvv\"\n            label=\"CVV\"\n            fullWidth\n            autoComplete=\"cc-csc\"\n            variant=\"outlined\"\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardCvcElement,\n              },\n            }}\n          />\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n","import {  Grid, Typography } from \"@mui/material\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport BasketSummary from \"../basket/BasketSummary\";\nimport BasketTable from \"../basket/BasketTable\";\n\nexport default function Review() {\n  const { basket } = useAppSelector(state => state.basket);\n\n  return (\n    <>\n      <Typography variant=\"h6\" gutterBottom>\n        Order summary\n      </Typography> \n      {basket && \n        <BasketTable items={basket.items} isBasket={false}/>\n      }\n      <Grid container>\n        <Grid item xs={6} />\n        <Grid item xs={6} >\n          <BasketSummary />\n        </Grid>\n\n      </Grid>\n    </>\n  );\n}\n","import * as yup from 'yup';\n\nexport const validationSchema = [\n  yup.object({\n    fullName: yup.string().required(\"Full name is required\"),\n    address1: yup.string().required(\"Adress line is required\"),\n    address2: yup.string().required(\"Adress 2 line is required\"),\n    city: yup.string().required(\"City line is required\"),\n    state: yup.string().required(\"State line is required\"),\n    zip: yup.string().required(\"Zip line is required\"),\n    country: yup.string().required(\"Country line is required\")\n  }),\n  yup.object(),\n  yup.object({\n    nameOnCard: yup.string().required()\n  })\n]\n","import {\n  Box,\n  Button,\n  Paper,\n  Step,\n  StepLabel,\n  Stepper,\n  Typography,\n} from \"@mui/material\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useEffect, useState } from \"react\";\nimport { FieldValues, FormProvider, useForm } from \"react-hook-form\";\nimport AddressForm from \"./AddressForm\";\nimport PaymentForm from \"./PaymentForm\";\nimport Review from \"./Review\";\nimport { validationSchema } from \"./checkoutValidation\";\nimport agent from \"../../app/api/agent\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { clearBasket } from \"../basket/basketSlice\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { StripeElementType } from \"@stripe/stripe-js\";\nimport {\n  CardNumberElement,\n  useElements,\n  useStripe,\n} from \"@stripe/react-stripe-js\";\n\nconst steps = [\"Shipping Addressss\", \"Review your order\", \"Payment Details\"];\n\nexport default function CheckoutPage() {\n  const [activeStep, setActiveStep] = useState(0);\n  const [orderNumber, setOrderNumber] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const dispatch = useAppDispatch();\n  const [card, setCard] = useState<{\n    elementError: { [key in StripeElementType]?: string };\n  }>({\n    elementError: {},\n  });\n  const [cardComplete, setCardComplete] = useState<any>({\n    cardNumber: false,\n    cardExpiry: false,\n    cardCvc: false,\n  });\n  const [paymentMessage, setPaymentMessage] = useState(\"\");\n  const [paymentSucceded, setPaymentSucceded] = useState(false);\n  const { basket } = useAppSelector((state) => state.basket);\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const currentValidationSchema = validationSchema[activeStep];\n  const methods = useForm({\n    mode: \"all\",\n    resolver: yupResolver(currentValidationSchema),\n  });\n\n  function onCardInputChange(event: any) {\n    setCard({\n      ...card,\n      elementError: {\n        ...card.elementError,\n        [event.elementType]: event.error?.message,\n      },\n    });\n    setCardComplete({ ...cardComplete, [event.elementType]: event.complete });\n  }\n\n  function getStepContent(step: number) {\n    switch (step) {\n      case 0:\n        return <AddressForm />;\n      case 1:\n        return <Review />;\n      case 2:\n        return (\n          <PaymentForm card={card} onCardInputChange={onCardInputChange} />\n        );\n      default:\n        throw new Error(\"Unkown step\");\n    }\n  }\n\n  useEffect(() => {\n    agent.Account.fetchAddress().then((response) => {\n      if (response) {\n        methods.reset({\n          ...methods.getValues(),\n          ...response,\n          saveAddress: false,\n        });\n      }\n    });\n  }, [methods]);\n\n  async function submitOrder(data: FieldValues) {\n    setLoading(true);\n    const { nameOnCard, saveAddress, ...shippingAddress } = data;\n    if (!stripe || !elements) return; // none are ready;\n    try {\n      const cardElement = elements.getElement(CardNumberElement);\n      const paymentResult = await stripe.confirmCardPayment(\n        basket?.clientSecret!,\n        {\n          payment_method: {\n            card: cardElement!,\n            billing_details: {\n              name: nameOnCard,\n            },\n          },\n        }\n      );\n      console.log(paymentResult);\n      if (paymentResult.paymentIntent?.status === \"succeeded\") {\n        const orderNumber = await agent.Orders.create({\n          saveAddress,\n          shippingAddress,\n        });\n        setOrderNumber(orderNumber);\n        setPaymentSucceded(true);\n        setPaymentMessage(\"Successful Payment\");\n        setActiveStep(activeStep + 1);\n        dispatch(clearBasket());\n        setLoading(false);\n      } else {\n        setPaymentMessage(paymentResult.error?.message!);\n        setPaymentSucceded(false);\n        setLoading(false);\n        setActiveStep(activeStep + 1);\n      }\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n    }\n  }\n\n  const handleNext = async (data: FieldValues) => {\n    if (activeStep === steps.length - 1) {\n      await submitOrder(data);\n    } else {\n      setActiveStep(activeStep + 1);\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep(activeStep - 1);\n  };\n\n  function submitDisabled(): boolean {\n    if (activeStep === steps.length - 1) {\n      return (\n        !cardComplete.cardCvc ||\n        !cardComplete.cardExpiry ||\n        !cardComplete.cardNumber ||\n        !methods.formState.isValid\n      );\n    } else {\n      return !methods.formState.isValid;\n    }\n  }\n\n  return (\n    <FormProvider {...methods}>\n      <Paper\n        variant=\"outlined\"\n        sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\n      >\n        <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n          Checkout\n        </Typography>\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\n          {steps.map((label) => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n        <>\n          {activeStep === steps.length ? (\n            <>\n              <Typography variant=\"h5\" gutterBottom>\n                {paymentMessage}\n              </Typography>\n              {paymentSucceded ? (\n                <Typography variant=\"subtitle1\">\n                  Your order number is #{orderNumber}.\n                </Typography>\n              ) : (\n                <Button variant=\"contained\" onClick={handleBack}>\n                  Go back and try again\n                </Button>\n              )}\n            </>\n          ) : (\n            <form onSubmit={methods.handleSubmit(handleNext)}>\n              {getStepContent(activeStep)}\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                {activeStep !== 0 && (\n                  <Button onClick={handleBack} sx={{ mt: 3, ml: 1 }}>\n                    Back\n                  </Button>\n                )}\n                <LoadingButton\n                  loading={loading}\n                  disabled={submitDisabled()}\n                  variant=\"contained\"\n                  type=\"submit\"\n                  sx={{ mt: 3, ml: 1 }}\n                >\n                  {activeStep === steps.length - 1 ? \"Place Order\" : \"Next\"}\n                </LoadingButton>\n              </Box>\n            </form>\n          )}\n        </>\n      </Paper>\n    </FormProvider>\n  );\n}\n","import { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { useEffect, useState } from \"react\";\nimport agent from \"../../app/api/agent\";\nimport Loader from \"../../app/layout/Loader\";\nimport { useAppDispatch } from \"../../app/store/configureStore\";\nimport { setBasket } from \"../basket/basketSlice\";\nimport CheckoutPage from \"./CheckoutPage\";\n\nconst stripePromise = loadStripe('pk_test_nuCrlciTxrzNBPXHtArKSvnC')\n\nexport default function CheckoutWrapper(){\n  const dispatch = useAppDispatch();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    agent.Payments.createPaymentItent()\n      .then(basket => dispatch(setBasket(basket)))\n      .catch(error => console.log(\"ERROR\",error))\n      .finally(() => setLoading(false));\n  }, [dispatch]);\n\n  if (loading) return <Loader message=\"Loading Checkout\"/>\n\n  return (\n    <Elements stripe={stripePromise}>\n      <CheckoutPage/>\n    </Elements>\n  )\n}","import { UploadFile } from \"@mui/icons-material\";\nimport { FormControl, FormHelperText, Typography } from \"@mui/material\";\nimport { useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { UseControllerProps, useController } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {}\n\nexport default function AppDropZone(props: Props) {\n  const { fieldState, field } = useController({ ...props, defaultValue: null });\n\n  const dropZoneStyles = {\n    display: 'flex',\n    border: 'dashed 3px #eee',\n    borderColor: '#eee',\n    borderRadius: '5px',\n    paddingTop: '30px',\n    alignItems: 'center',\n    height: 200,\n    width: 500\n  }\n\n  const dropZoneActive = {\n    borderColor: 'green'\n  }\n\n  const onDrop = useCallback((acceptedFiles) => {\n    acceptedFiles[0] = Object.assign(acceptedFiles[0], {\n      preview: URL.createObjectURL(acceptedFiles[0]),\n    });\n    field.onChange(acceptedFiles[0]);\n  }, [field]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  return (\n    <div {...getRootProps()}>\n      <FormControl style={isDragActive ? {...dropZoneStyles, ...dropZoneActive} : dropZoneStyles} error={!!fieldState.error}>\n        <input style={{border: 'none'}} {...getInputProps} />\n        <UploadFile sx={{fontSize: '100px'}}/>\n        <Typography variant='h4'>Drop Image here</Typography>\n        <FormHelperText>{fieldState.error?.message}</FormHelperText>\n      </FormControl>\n    </div>\n  );\n}\n","import { FormControl, InputLabel, Select, MenuItem, FormHelperText } from \"@mui/material\";\nimport React from \"react\";\nimport { useController, UseControllerProps } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {\n  label: string;\n  items: string[];\n}\n\nexport function AppSelectList(props: Props) {\n  const { fieldState, field} = useController({...props, defaultValue: ''})\n  \n  return (\n    <FormControl fullWidth error={!!fieldState.error}>\n      <InputLabel>{props.label}</InputLabel>\n      <Select\n        value={field.value}\n        label={props.label}\n        onChange={field.onChange}\n      >\n        {props.items.map((item, index) => \n          <MenuItem key={index} value={item}>{item}</MenuItem>\n        )}\n      </Select>\n      <FormHelperText>{fieldState.error?.message}</FormHelperText>\n    </FormControl>\n  );\n}\n","import * as yup from 'yup';\n\nexport const validationSchema = yup.object({\n  name: yup.string().required(),\n  brand: yup.string().required(),\n  type: yup.string().required(),\n  price: yup.number().required().moreThan(10),\n  quantityInStock: yup.number().required().min(0),\n  description: yup.string().required(),\n  file: yup.mixed().when('pictureUrl', {\n    is: (value: string) => !value,\n    then: yup.mixed().required('Please provide an image')\n  })\n})","import { Box, Button, Grid, Paper, Typography } from \"@mui/material\";\nimport React, { useEffect } from \"react\";\nimport { FieldValues, useForm } from \"react-hook-form\";\nimport AppDropZone from \"../../app/components/AppDropZone\";\nimport { AppSelectList } from \"../../app/components/AppSelectList\";\nimport AppTextInput from \"../../app/components/AppTextInput\";\nimport useProducts from \"../../app/hooks/useProducts\";\nimport { Product } from \"../../app/models/product\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { validationSchema } from \"./productValidation\";\nimport agent from \"../../app/api/agent\";\nimport { useDispatch } from \"react-redux\";\nimport { setProduct } from \"../catalog/catalogSlice\";\nimport { LoadingButton } from \"@mui/lab\";\n\ninterface Props {\n  product?: Product;\n  cancelEdit: () => void;\n}\n\nexport default function ProductForm({ product, cancelEdit }: Props) {\n  const { control, reset, handleSubmit, watch, formState: {isDirty, isSubmitting} } = useForm({\n    resolver: yupResolver<any>(validationSchema)\n  })\n  const { brands, types } = useProducts();\n  const watchFile = watch('file', null);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (product && !watchFile && !isDirty) reset(product);\n\n    // clean up function\n    return () => {\n      if (watchFile) URL.revokeObjectURL(watchFile.preview);\n    }\n\n  }, [reset, product, watchFile, isDirty]);\n\n  async function handleSubmitData(data: FieldValues) {\n    try {\n      let response: Product;\n      if (product) {\n        response = await agent.Admin.updateProduct(data);\n      } else {\n        response = await agent.Admin.createProduct(data);\n      }\n      dispatch(setProduct(response))\n      cancelEdit();\n    } catch (error: any) {\n      console.log(error);\n    }\n  }\n\n  return (\n    <Box component={Paper} sx={{ p: 4 }}>\n      <Typography variant=\"h4\" gutterBottom sx={{ mb: 4 }}>\n        Product Details\n      </Typography>\n      <form onSubmit={handleSubmit(handleSubmitData)}>\n        <Grid container spacing={3}>\n          <Grid item xs={12} sm={12}>\n            <AppTextInput control={control} name=\"name\" label=\"Product name\" />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppSelectList\n              control={control}\n              name=\"brand\"\n              label=\"Brand\"\n              items={brands}\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppSelectList\n              control={control}\n              name=\"type\"\n              label=\"Type\"\n              items={types}\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput\n              type=\"number\"\n              control={control}\n              name=\"price\"\n              label=\"Price\"\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput\n              type=\"number\"\n              control={control}\n              name=\"quantityInStock\"\n              label=\"Qty. in Stock\"\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <AppTextInput\n              mulitline={true}\n              rows={4}\n              control={control}\n              name=\"description\"\n              label=\"Description\"\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Box display=\"flex\" justifyContent='space-between' alignItems='center'>\n              <AppDropZone control={control} name=\"file\" />\n              {watchFile ? (\n                <img src={watchFile.preview} alt=\"preview\" style={{maxHeight: 200}} />\n              ) : (\n                <img src={product?.pictureUrl} alt={product?.name} style={{maxHeight: 200}} />\n              )}\n            </Box>\n          </Grid>\n        </Grid>\n        <Box display=\"flex\" justifyContent=\"space-between\" sx={{ mt: 3 }}>\n          <Button onClick={cancelEdit} variant=\"contained\" color=\"inherit\">\n            Cancel\n          </Button>\n          <LoadingButton loading={isSubmitting} type=\"submit\" variant=\"contained\" color=\"success\">\n            Submit\n          </LoadingButton>\n        </Box>\n      </form>\n    </Box>\n  );\n}\n","import { Delete, Edit } from '@mui/icons-material';\nimport { LoadingButton } from '@mui/lab';\nimport { Box, Button, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Typography } from '@mui/material';\nimport { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport agent from '../../app/api/agent';\nimport AppPagination from '../../app/components/AppPagination';\nimport useProducts from '../../app/hooks/useProducts';\nimport { Product } from '../../app/models/product';\nimport { removeProduct, setPageNumber } from '../catalog/catalogSlice';\nimport ProductForm from './ProductForm';\n\n\nexport default function Inverntory() {\n  const { products, metaData} = useProducts();\n  const dispatch = useDispatch();\n  const [editMode, setEditMode] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState<Product | undefined>(undefined);\n  const [loading, setLoading] = useState(false);\n  const [target, setTarget] = useState(0);\n\n  function handleSelectProduct(product: Product) {\n    setSelectedProduct(product);\n    setEditMode(true);\n  }\n\n  function handleDeleteProduct(id: number) {\n    setLoading(true);\n    setTarget(id);\n    agent.Admin.deleteProduct(id)\n      .then(() => dispatch(removeProduct(id)))\n      .catch(error => console.log(error))\n      .finally(() => setLoading(false));\n  }\n\n  function cancelEdit() {\n    if (selectedProduct) setSelectedProduct(undefined);\n    setEditMode(false);\n  }\n\n  if (editMode) return <ProductForm product={selectedProduct} cancelEdit={cancelEdit}/>\n\n  return (\n    <>\n      <Box display=\"flex\" justifyContent=\"space-between\">\n        <Typography sx={{p: 2}} variant='h4'>Inventory</Typography>\n        <Button onClick={() => setEditMode(true)} sx={{m: 2}} size=\"large\" variant=\"contained\">Create</Button>\n      </Box>\n      <TableContainer component={Paper}>\n        <Table sx={{ minWidth: 650}} aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>#</TableCell>\n              <TableCell align=\"left\">Product</TableCell>\n              <TableCell align=\"right\">Price</TableCell>\n              <TableCell align=\"center\">Type</TableCell>\n              <TableCell align=\"center\">Brand</TableCell>\n              <TableCell align=\"center\">Quantity</TableCell>\n              <TableCell align=\"right\"></TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {products.map((product:any) => (\n\n              <TableRow \n                key={product.id}\n                sx={{'&:last-child td, &:last-child th': {border: 0}}}\n              >\n                <TableCell component=\"th\" scope=\"row\">\n                  {product.id}\n                </TableCell>\n                <TableCell align=\"left\">\n                  <Box display='flex' alignItems='center'>\n                    <img src={product.pictureUrl} alt={product.name} style={{ height: 50, marginRight: 20 }}/>\n                    <span>{product.name}</span>\n                  </Box>\n                </TableCell>\n                <TableCell align=\"right\">${product.price}</TableCell>\n                <TableCell align=\"right\">{product.type}</TableCell>\n                <TableCell align=\"right\">{product.brand}</TableCell>\n                <TableCell align=\"right\">{product.quantityInStock}</TableCell>\n                <TableCell align=\"right\">\n                  <Button onClick={() => handleSelectProduct(product)} startIcon={<Edit/>}/>\n                  <LoadingButton \n                    loading={loading && target === product.id} \n                    startIcon={<Delete/>} color=\"error\" \n                    onClick={() => handleDeleteProduct(product.id)}\n                  />\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      {metaData && \n        <Box sx={{pt:2}}>\n          <AppPagination \n            metaData={metaData} \n            onPageChange={(page: number) => dispatch(setPageNumber({pageNumber: page}))} />\n        </Box>\n      }\n    </>\n  );\n}\n","\nimport { Container, createTheme, CssBaseline, ThemeProvider } from \"@mui/material\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport Catalog from \"../../features/catalog/Catalog\";\nimport Header from \"./Header\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport ServerError from \"../errors/ServerError\";\nimport NotFound from \"../errors/NotFound\";\nimport Loader from \"./Loader\";\nimport { fetchBasketAsync } from \"../../features/basket/basketSlice\";\nimport { useAppDispatch } from \"../store/configureStore\";\n\nimport ProductDetailsPage from \"../../features/catalog/ProductDetailsPage\";\nimport BasketPage from \"../../features/basket/BasketPage\";\nimport Login from \"../../features/account/Login\";\nimport Register from \"../../features/account/Register\";\nimport { fetchCurrentUser } from \"../../features/account/accountSlice\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport Orders from \"../../features/orders/Orders\";\nimport CheckoutWrapper from \"../../features/checkout/CheckoutWrapper\";\nimport Inventory from \"../../features/admin/Inventory\";\n\n  \n\nfunction App() {\n  const dispatch = useAppDispatch();\n  const [loading, setLoading] = useState(true);\n  const [darkMode, setDarkMode] = useState(false);\n  const palleteType = darkMode ? 'dark' : 'light';\n\n  // functionality for dark or light theme\n  const theme = createTheme({\n    palette: {\n      mode: `${palleteType}`,\n      background: {\n        default: ( palleteType === 'light' ? '#efefef' : '#121212')\n      }\n    }\n  });\n\n  const initApp = useCallback(async () => {\n    try {\n      await dispatch(fetchCurrentUser());\n      await dispatch(fetchBasketAsync());\n    } catch (error) {\n      console.log(error);\n    }\n  }, [dispatch])\n\n  useEffect(() => {\n    initApp().then(() => setLoading(false))\n  }, [initApp])\n\n  const changeMode = () => {\n    setDarkMode(!darkMode);\n  }\n\n  if (loading) return <Loader message=\"Initialising App...\" />\n\n  return (\n    <ThemeProvider theme={theme}>\n      <ToastContainer theme=\"colored\" position=\"bottom-right\"/>\n      <CssBaseline/>\n      <Header state={darkMode} changeMode={changeMode}/>\n      <Container sx={{mb: 4}}>\n        <Switch>\n          <Route exact path=\"/\" component={Catalog} />\n          <Route exact path=\"/catalog/:id\" component={ProductDetailsPage} />\n          <Route exact path=\"/basket\" component={BasketPage} />\n          <PrivateRoute exact path=\"/checkout\" component={CheckoutWrapper} />\n          <PrivateRoute exact path=\"/orders\" component={Orders} />\n          <PrivateRoute roles={['Admin']} exact path=\"/inventory\" component={Inventory} />\n          <Route exact path=\"/login\" component={Login} />\n          <Route exact path=\"/register\" component={Register} />\n          <Route exact path=\"/server-error\" component={ServerError} />\n          <Route component={NotFound} />\n        </Switch>\n      </Container>\n    </ThemeProvider>\n  )\n  \n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './app/layout/styles.css';\nimport App from './app/layout/App';\nimport reportWebVitals from './reportWebVitals';\nimport { createBrowserHistory } from 'history';\nimport { Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './app/store/configureStore';\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router history={history} >\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}