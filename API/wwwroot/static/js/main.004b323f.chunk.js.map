{"version":3,"sources":["app/components/AppPagination.tsx","app/components/CheckboxButtons.tsx","app/components/RadioButton.tsx","app/layout/Loader.tsx","app/models/pagination.ts","app/api/agent.ts","features/basket/basketSlice.ts","app/util/util.ts","features/account/accountSlice.ts","features/catalog/catalogSlice.ts","features/contact/counterSlice.ts","app/store/configureStore.ts","features/catalog/ProductCard.tsx","features/catalog/ProductCardSeketon.tsx","features/catalog/ProductList.tsx","features/catalog/ProductSearch.tsx","features/catalog/Catalog.tsx","app/layout/SignedInMenu.tsx","app/layout/Header.tsx","app/errors/ServerError.tsx","app/errors/NotFound.tsx","features/about/AboutPage.tsx","features/contact/ContactPage.tsx","features/catalog/ProductDetailsPage.tsx","features/basket/BasketSummary.tsx","features/basket/BasketTable.tsx","features/basket/BasketPage.tsx","features/account/Login.tsx","features/account/Register.tsx","app/layout/PrivateRoute.tsx","features/orders/OrderDetail.tsx","features/orders/Orders.tsx","app/components/AppCheckbox.tsx","app/components/AppTextInput.tsx","features/checkout/AddressForm.tsx","features/checkout/StripeInput.tsx","features/checkout/PaymentForm.tsx","features/checkout/Review.tsx","features/checkout/checkoutValidation.ts","features/checkout/CheckoutPage.tsx","features/checkout/CheckoutWrapper.tsx","app/layout/App.tsx","reportWebVitals.ts","index.tsx"],"names":["AppPagination","metaData","onPageChange","currentPage","totalCount","totalPages","pageSize","Box","display","justifyContent","alignItems","Typography","Pagination","color","size","count","page","onChange","e","CheckboxButtons","items","checked","useState","checkedItems","setCheckedItems","FormGroup","map","item","FormControlLabel","control","Checkbox","onClick","value","newChecked","findIndex","filter","handleCheck","indexOf","label","RadioButtonGroup","options","selectedValue","FormControl","component","RadioGroup","Radio","Loader","message","Backdrop","open","invisible","height","CircularProgress","variant","sx","position","top","PaginatedResponse","this","axios","defaults","baseURL","process","withCredentials","responseBody","response","data","interceptors","request","use","config","token","store","getState","account","user","headers","Authorization","a","pagination","JSON","parse","error","status","errors","modelStateErrors","key","push","flat","toast","title","history","pathname","state","Promise","reject","requests","url","params","get","then","body","post","delete","Basket","addItem","productId","quantity","removeItem","agent","Catalog","list","details","id","fetchFilters","TestErrors","get400Error","get401Error","get404Error","get500Error","getValidationError","Account","login","values","register","currentUser","fetchAddress","Orders","fetch","create","Payments","createPaymentItent","fetchBasketAsync","createAsyncThunk","_","thunkAPI","rejectWithValue","condition","b","document","cookie","match","pop","getCookie","addBasketItemAsync","thunkApi","removeBasketItemAsync","basketSlice","createSlice","name","initialState","basket","reducers","setBasket","action","payload","clearBasket","extraReducers","builder","addCase","pending","meta","arg","fulfilled","itemIndex","i","undefined","splice","rejected","console","log","addMatcher","isAnyOf","actions","signInUser","userDto","dispatch","localStorage","setItem","stringify","fetchCurrentUser","setUser","getItem","accountSlice","signOut","productsAdapter","createEntityAdapter","getAxiosParams","productParams","URLSearchParams","append","pageNumber","toString","orderBy","searchTerm","brands","length","types","fetchProductsAsync","catalog","setMetaData","fetchSingleProductAsync","__dirname","catalogSlice","getInitialState","productsLoaded","filtersLoaded","setProductParams","setPageNumber","resetProductParams","setAll","upsertOne","productSelectors","getSelectors","counterSlice","increment","decrement","configureStore","reducer","counter","useAppDispatch","useDispatch","useAppSelector","useSelector","ProductCard","product","Card","CardMedia","image","pictureUrl","CardContent","textOverflow","overflow","whiteSpace","gutterBottom","brand","type","price","toFixed","CardActions","LoadingButton","loading","includes","Button","Link","to","ProductCardSeketon","Grid","xs","Skeleton","animation","style","marginBottom","width","ProductList","products","mb","container","spacing","sm","md","lg","ProductSearch","setSearchTerm","debouncedSearch","debounce","event","target","TextField","fullWidth","sortOptions","selectAll","useEffect","columnSpacing","Paper","p","mt","SignedInMenu","anchorEl","setAnchorEl","Boolean","handleClose","currentTarget","typography","email","Menu","onClose","TransitionComponent","Fade","MenuItem","midLinks","path","rightLinks","navStyles","textDecoration","Header","changeMode","itemCount","reduce","acc","AppBar","Toolbar","alignContent","NavLink","Switch","List","ListItem","toUpperCase","IconButton","Badge","badgeContent","ShoppingCart","ServerError","useHistory","useLocation","Container","Divider","detail","NotFound","AboutPage","setErros","ButtonGroup","catch","err","Alert","severity","AlertTitle","ListItemText","ContactPage","ProductDetailsPage","productStatus","useParams","selectById","setQuantity","find","parseInt","src","alt","TableContainer","Table","TableBody","TableRow","TableCell","description","quantityInStock","disabled","updatedQuantity","BasketSummary","subtotal","sum","deliveryFee","colSpan","align","fontStyle","BasketTable","isBasket","minWidth","TableHead","border","marginRight","Remove","Add","Delete","BasketPage","Login","location","useForm","mode","handleSubmit","formState","isSubmitting","isValid","from","maxWidth","flexDirection","Avatar","m","bgcolor","onSubmit","noValidate","required","username","helperText","margin","autoFocus","password","autoComplete","Register","setError","success","forEach","handleApiErrors","pattern","PrivateRoute","Component","rest","render","props","OrderDetail","order","setSelectedOrder","orderItems","orderStatus","orders","setOrders","setLoading","selectedOrderNumber","setSelectedorderNumber","finally","o","scope","total","orderDate","split","AppCheckbox","field","useController","defaultValue","AppTextInput","fieldState","AddressForm","useFormContext","isDirty","StripeInput","forwardRef","ref","elementRef","useRef","useImperativeHandle","focus","current","onReady","element","PaymentForm","card","onCardInputChange","elementError","cardNumber","InputLabelProps","shrink","InputProps","inputComponent","inputProps","CardNumberElement","cardCvc","cardExpiry","CardExpiryElement","CardCvcElement","Review","validationSchema","yup","fullName","address1","address2","city","zip","country","nameOnCard","steps","CheckoutPage","activeStep","setActiveStep","orderNumber","setOrderNumber","setCard","cardComplete","setCardComplete","paymentMessage","setPaymentMessage","paymentSucceded","setPaymentSucceded","stripe","useStripe","elements","useElements","currentValidationSchema","methods","resolver","yupResolver","elementType","complete","submitOrder","saveAddress","shippingAddress","cardElement","getElement","confirmCardPayment","clientSecret","payment_method","billing_details","paymentResult","paymentIntent","reset","getValues","handleNext","handleBack","my","Stepper","pt","pb","Step","StepLabel","step","Error","getStepContent","ml","stripePromise","loadStripe","CheckoutWrapper","App","darkMode","setDarkMode","palleteType","theme","createTheme","palette","background","default","initApp","useCallback","ThemeProvider","CssBaseline","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.004b323f.chunk.js","sourcesContent":["import { Box, Pagination, Typography } from '@mui/material'\nimport { MetaData } from '../models/pagination'\n\ninterface Props {\n  metaData: MetaData;\n  onPageChange: (page: number) => void;\n}\n\nexport default function AppPagination({metaData, onPageChange}: Props) {\n  const { currentPage, totalCount, totalPages, pageSize } = metaData;\n  \n  \n  return (\n    <div>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n        <Typography>\n          Display {(currentPage -1) * pageSize + 1} - \n          {currentPage * pageSize > totalCount\n            ? totalCount\n            : currentPage * pageSize\n          } of {totalCount}\n        </Typography>\n        <Pagination\n          color=\"secondary\"\n          size=\"large\"\n          count={totalPages}\n          page={currentPage}\n          onChange={(e, page) => onPageChange(page)}\n        />\n      </Box>\n    </div>\n  )\n}\n","import { Checkbox, FormControlLabel, FormGroup } from \"@mui/material\";\nimport { useState } from \"react\";\n\ninterface Props {\n  items: string[];\n  checked?: string[];\n  onChange: (items: string[]) => void\n}\n\nexport default function CheckboxButtons({ items, checked, onChange }: Props) {\n  const [checkedItems, setCheckedItems] = useState(checked || []);\n\n  function handleCheck(value: string) {\n    const currentIndex = checkedItems.findIndex(item => item === value);\n    let newChecked: string[] = [];\n    if (currentIndex === -1) newChecked = [...checkedItems, value];\n    else newChecked = checkedItems.filter(item => item !== value);\n    setCheckedItems(newChecked);\n    onChange(newChecked);\n  }\n\n  return (\n    <div>\n      <FormGroup>\n        {items.map(item => (\n          <FormControlLabel\n            key={item}\n            control={\n              <Checkbox \n                onClick={() => handleCheck(item)}\n                checked={checkedItems.indexOf(item) !== -1}\n              />\n            }\n            label={item}\n          />\n        ))}\n      </FormGroup>\n    </div>\n  )\n}\n","import { FormControl, FormControlLabel, Radio, RadioGroup } from \"@mui/material\";\n\ninterface Props {\n  options: any;\n  onChange: (event: any) => void;\n  selectedValue: string\n}\n\nexport default function RadioButtonGroup({options, onChange, selectedValue}: Props) {\n\n\n  return (\n    <FormControl component=\"fieldset\">\n      <RadioGroup onChange={onChange} value={selectedValue}>\n        {options.map(({value, label}: any) => (\n          <FormControlLabel key={value} value={value} control={<Radio />} label={label} />\n        ))}\n      </RadioGroup>\n    </FormControl>\n  )\n}","import { Backdrop, Box, CircularProgress, Typography } from \"@mui/material\";\n\ninterface Props {\n  message?: string;\n}\n\nexport default function Loader({message = \"Loading...\"}: Props) {\n  return (\n    <Backdrop open={true} invisible={true}>\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100vh\">\n        <CircularProgress size={100} color=\"secondary\"/>\n        <Typography \n          variant=\"h4\" \n          sx={{justifyContent: 'center', position: 'fixed', top: '60%'}}\n        >\n          {message}\n        </Typography>\n      </Box>\n    </Backdrop>\n  )\n}\n","export interface MetaData {\n  currentPage: number;\n  totalPages: number;\n  pageSize: number;\n  totalCount: number;\n}\n\nexport class PaginatedResponse<T> {\n  items: T;\n  metaData: MetaData;\n\n  constructor(items: T, metaData: MetaData) {\n    this.items = items;\n    this.metaData = metaData;\n  }\n}","import axios, { AxiosError, AxiosResponse } from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { history } from \"../..\";\nimport { PaginatedResponse } from \"../models/pagination\";\nimport { store } from \"../store/configureStore\";\n\nconst sleep = () => new Promise((resolve) => setTimeout(resolve, 500));\n\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\naxios.defaults.withCredentials = true;\n\nconst responseBody = (response: AxiosResponse) => response.data;\n\naxios.interceptors.request.use(config => {\n  const token = store.getState().account.user?.token;\n  if (token) config.headers!!.Authorization = `Bearer ${token}`;\n  return config;\n})\n\naxios.interceptors.response.use(async (response) => {\n    if (process.env.NODE_ENV === 'development') await sleep();\n    const pagination = response.headers['pagination'];\n    if (pagination) {\n      response.data = new PaginatedResponse(response.data, JSON.parse(pagination));\n      return response;\n    }\n    return response;\n  },\n  (error: AxiosError) => {\n    const { data, status } = error.response!;\n    switch (status) {\n      case 400:\n        if (data.errors) {\n          const modelStateErrors: string[] = [];\n          for (const key in data.errors) {\n            if (data.errors[key]) {\n              modelStateErrors.push(data.errors[key]);\n            }\n          }\n          throw modelStateErrors.flat();\n        }\n        toast.error(data.title);\n        break;\n      case 401:\n        toast.error(data.title);\n        break;\n      case 500:\n        history.push({\n          pathname: \"/server-error\",\n          state: { error: data },\n        });\n        break;\n      default:\n        break;\n    }\n    return Promise.reject(error.response);\n  }\n);\n\nconst requests = {\n  get: (url: string, params?: URLSearchParams) => axios.get(url, {params}).then(responseBody),\n  post: (url: string, body: {}) => axios.post(url, body).then(responseBody),\n  put: (url: string, body: {}) => axios.put(url, body).then(responseBody),\n  delete: (url: string) => axios.delete(url).then(responseBody),\n};\n\nconst Catalog = {\n  list: (params: URLSearchParams) => requests.get(\"products\", params),\n  details: (id: number) => requests.get(`products/${id}`),\n  fetchFilters: () => requests.get(\"products/filters\")\n};\n\nconst TestErrors = {\n  get400Error: () => requests.get(\"buggy/bad-request\"),\n  get401Error: () => requests.get(\"buggy/unauthorized\"),\n  get404Error: () => requests.get(\"buggy/not-found\"),\n  get500Error: () => requests.get(\"buggy/server-error\"),\n  getValidationError: () => requests.get(\"buggy/validation-error\"),\n};\n\nconst Basket = {\n  get: () => requests.get(\"basket\"),\n  addItem: (productId: number, quantity = 1) =>\n    requests.post(`basket?productId=${productId}&quantity=${quantity}`, {}),\n  removeItem: (productId: number, quantity = 1) =>\n    requests.delete(`basket?productId=${productId}&quantity=${quantity}`),\n};\n\nconst Account = {\n  login: (values: any) => requests.post('account/login', values),\n  register: (values: any) => requests.post('account/register', values),\n  currentUser: () => requests.get('account/currentUser'),\n  fetchAddress: () => requests.get('account/savedAddress')\n}\n\nconst Orders = {\n  list: () => requests.get('orders'),\n  fetch: (id: number) => requests.get(`orders/${id}`),\n  create: (values: any) => requests.post('orders', values)\n}\n\nconst Payments = {\n  createPaymentItent: () => requests.post('payments', {})\n}\n\nconst agent = {\n  Basket,\n  Catalog,\n  TestErrors,\n  Account,\n  Orders,\n  Payments\n};\n\nexport default agent;\n","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\nimport agent from \"../../app/api/agent\";\nimport { Basket } from \"../../app/models/basket\";\nimport { getCookie } from \"../../app/util/util\";\n\n// any needed interface\ninterface BasketState {\n  basket: Basket | null;\n  status: string;\n}\n\n// Initial State\nconst initialState: BasketState = {\n  basket: null,\n  status: 'idle'\n}\n\n// METHODS for the api calls\nexport const fetchBasketAsync = createAsyncThunk<Basket>(\n  'basket/fetchBasketAsync',\n  async (_, thunkAPI) => {\n    try {\n      return await agent.Basket.get();\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({error: error.data})\n    }\n  },\n  {\n    condition: () => {\n      if (!getCookie('buyerId')) return false;\n    }\n  }\n)\n\nexport const addBasketItemAsync = createAsyncThunk<Basket, {productId: number, quantity?: number}>(\n  'basket/addBasketItemAsync',\n  async ({productId, quantity = 1}, thunkApi) => {\n    try {\n      return await agent.Basket.addItem(productId, quantity)\n    } catch (error: any) {\n      return thunkApi.rejectWithValue({error: error.data});  \n    }\n  }\n)\n\nexport const removeBasketItemAsync = createAsyncThunk<void, {productId: number, quantity: number, name?: string}>(\n  'basket/removeBasketItemAsync',\n  async ({productId, quantity}, thunkApi) => {\n    try {\n      await agent.Basket.removeItem(productId, quantity);\n    } catch (error: any) {\n      return thunkApi.rejectWithValue({error: error.data});\n    }\n  }\n)\n\n// actions w/ reducers (cases)\nexport const basketSlice = createSlice({\n  name: 'basket',\n  initialState,\n  reducers: {\n    setBasket: (state, action) => {\n      state.basket = action.payload\n    },\n    clearBasket: (state) => {\n      state.basket = null;\n    }\n  },\n  extraReducers: (builder => {\n    builder.addCase(addBasketItemAsync.pending, (state, action) => {\n      state.status = 'pendingAddItem' + action.meta.arg.productId;\n    });\n    builder.addCase(removeBasketItemAsync.pending, (state, action) => {\n      state.status = 'pendingRemoveItem' + action.meta.arg.productId + action.meta.arg.name;\n    });\n    builder.addCase(removeBasketItemAsync.fulfilled, (state, action) => {\n      const { productId, quantity} = action.meta.arg;\n      const itemIndex = state.basket?.items.findIndex(i => i.productId === productId);\n      if (itemIndex === -1 || itemIndex === undefined) return;\n      state.basket!.items[itemIndex].quantity -= quantity\n      if (state.basket?.items[itemIndex].quantity === 0)\n        state.basket.items.splice(itemIndex, 1);\n      state.status = 'idle';\n    });\n    builder.addCase(removeBasketItemAsync.rejected, (state, action) => {\n      console.log(action.payload);\n      state.status = 'idle';\n    });\n    builder.addMatcher(isAnyOf(addBasketItemAsync.fulfilled, fetchBasketAsync.fulfilled), (state, action) => {\n      state.basket = action.payload;\n      state.status = 'idle'\n    });\n    builder.addMatcher(isAnyOf(addBasketItemAsync.rejected, fetchBasketAsync.rejected), (state, action) => {\n      console.log(action.payload);\n      state.status = 'idle';\n    });\n  })\n})\n\nexport const {setBasket, clearBasket} = basketSlice.actions;","export  function getCookie(key: string) {\n  const b = document.cookie.match(\"(^|;)\\\\s*\" + key + \"\\\\s*=\\\\s*([^;]+)\")\n  return b ? b.pop() : \"\";\n}","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\nimport { FieldValues } from \"react-hook-form\";\nimport { toast } from \"react-toastify\";\nimport { history } from \"../..\";\nimport agent from \"../../app/api/agent\";\nimport { User } from \"../../app/models/user\";\nimport { setBasket } from \"../basket/basketSlice\";\n\n// necessary interfaces\ninterface AccountState {\n  user: User | null;\n}\n\n// initial state\nconst initialState: AccountState = {\n  user: null\n}\n\n// POST/signin api call\nexport const signInUser = createAsyncThunk<User, FieldValues>(\n  'account/signInUser',\n  async (data, thunkAPI) => {\n    try {\n      const userDto = await agent.Account.login(data);\n      const { basket, ...user} = userDto;\n      if (basket) thunkAPI.dispatch(setBasket(basket));\n      localStorage.setItem('user', JSON.stringify(user));\n      return user;\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({error: error.data})\n    }\n  }\n)\n\n// GET/user api call\nexport const fetchCurrentUser = createAsyncThunk<User>(\n  'account/fetchCurrentUser',\n  async(_, thunkAPI) => {\n    thunkAPI.dispatch(setUser(JSON.parse(localStorage.getItem('user')!)))\n    try {\n      const userDto = await agent.Account.currentUser();\n      const {basket, ...user} = userDto;\n      if (basket) thunkAPI.dispatch(setBasket(basket));\n      localStorage.setItem('user', JSON.stringify(user));\n      return user;\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({error: error.data})\n    }\n  }, \n  {\n    condition: () => {\n      if (!localStorage.getItem('user')) return false;\n    }\n  }\n)\n\n// create slice and reducers\nexport const accountSlice = createSlice({\n  name: 'account',\n  initialState,\n  reducers: {\n    signOut: (state) => {\n      state.user = null;\n      localStorage.removeItem('user');\n      history.push(\"/\");\n    },\n    setUser: (state, action) => {\n      state.user = action.payload;\n    }\n  },\n  extraReducers: (builder => {\n    builder.addCase(fetchCurrentUser.rejected, (state) => {\n      state.user = null;\n      localStorage.removeItem('user');\n      toast.error('Session expired - please login again');\n      history.push(\"/\")\n    })\n    builder.addMatcher(isAnyOf(signInUser.fulfilled, fetchCurrentUser.fulfilled), (state, action) => {\n      state.user = action.payload\n    });\n    builder.addMatcher(isAnyOf(signInUser.rejected), (state, action) => {\n      throw action.payload;\n    })\n  })\n});\n\nexport const { signOut, setUser } = accountSlice.actions;","import {\n  createAsyncThunk,\n  createEntityAdapter,\n  createSlice,\n} from \"@reduxjs/toolkit\";\nimport agent from \"../../app/api/agent\";\nimport { MetaData } from \"../../app/models/pagination\";\nimport { Product, ProductParams } from \"../../app/models/product\";\nimport { RootState } from \"../../app/store/configureStore\";\n\ninterface CatalogState {\n  productsLoaded: boolean;\n  filtersLoaded: boolean;\n  status: string;\n  brands: string[];\n  types: string[];\n  productParams: ProductParams;\n  metaData: MetaData | null;\n}\n\nconst productsAdapter = createEntityAdapter<Product>();\n\nfunction getAxiosParams(productParams: ProductParams) {\n  const params = new URLSearchParams();\n  params.append('pageNumber', productParams.pageNumber.toString());\n  params.append('pageSize', productParams.pageSize.toString());\n  params.append('orderBy', productParams.orderBy);\n  if (productParams.searchTerm) params.append('searchTerm', productParams.searchTerm);\n  if (productParams.brands?.length > 0) params.append('brands', productParams.brands.toString());\n  if (productParams.types?.length > 0) params.append('types', productParams.types.toString());\n  return params;\n}\n\nexport const fetchProductsAsync = createAsyncThunk<Product[], void, {state: RootState}>(\n  \"catalog/fetchProductsAsync\",\n  async (_, thunkApi) => {\n    const params = getAxiosParams(thunkApi.getState().catalog.productParams);\n    try {\n      const response =  await agent.Catalog.list(params);\n      thunkApi.dispatch(setMetaData(response.metaData));\n      return response.items;\n    } catch (error: any) {\n      return thunkApi.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\nexport const fetchSingleProductAsync = createAsyncThunk<Product, number>(\n  \"catalog/fetchSingleProductAsync\",\n  async (productId, thunkApi) => {\n    try {\n      return await agent.Catalog.details(productId);\n    } catch (error: any) {\n      return thunkApi.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\nexport const fetchFilters = createAsyncThunk(\n  \"catalog/fetchFilters\",\n  async (__dirname, thunkAPI) => {\n    try {\n      return agent.Catalog.fetchFilters();\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\nfunction initParams() {\n  return {\n    pageNumber: 1,\n    pageSize: 6,\n    orderBy: \"name\",\n    brands: [],\n    types: []\n  };\n}\n\nexport const catalogSlice = createSlice({\n  name: \"catalog\",\n  initialState: productsAdapter.getInitialState<CatalogState>({\n    productsLoaded: false,\n    filtersLoaded: false,\n    status: \"idle\",\n    brands: [],\n    types: [],\n    productParams: initParams(),\n    metaData: null\n  }),\n  reducers: {\n    setProductParams: (state, action) => {\n      state.productsLoaded = false;\n      state.productParams = { ...state.productParams, ...action.payload, pageNumber: 1 };\n    },\n    setPageNumber: (state, action) => {\n      state.productsLoaded = false;\n      state.productParams = {...state.productParams, ...action.payload}\n    },\n    setMetaData: (state, action) => {\n      state.metaData = action.payload\n    },\n    resetProductParams: (state) => {\n      state.productParams = initParams();\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(fetchProductsAsync.pending, (state) => {\n      state.status = \"pendingFetchProducts\";\n    });\n    builder.addCase(fetchProductsAsync.fulfilled, (state, action) => {\n      productsAdapter.setAll(state, action.payload);\n      state.status = \"idle\";\n      state.productsLoaded = true;\n    });\n    builder.addCase(fetchProductsAsync.rejected, (state, action) => {\n      console.log(action.payload);\n      state.status = \"idle\";\n    });\n    builder.addCase(fetchSingleProductAsync.pending, (state) => {\n      state.status = \"pendingFetchProduct\";\n    });\n    builder.addCase(fetchSingleProductAsync.fulfilled, (state, action) => {\n      productsAdapter.upsertOne(state, action.payload);\n      state.status = \"idle\";\n    });\n    builder.addCase(fetchSingleProductAsync.rejected, (state, action) => {\n      console.log(action);\n      state.status = \"idle\";\n    });\n    builder.addCase(fetchFilters.pending, (state) => {\n      state.status = \"pendingFetchFilters\";\n    });\n    builder.addCase(fetchFilters.fulfilled, (state, action) => {\n      state.status = \"idle\";\n      state.brands = action.payload.brands;\n      state.types = action.payload.types;\n      state.filtersLoaded = true;\n    });\n    builder.addCase(fetchFilters.rejected, (state, action) => {\n      state.status = \"idle\";\n      console.log(action.payload);\n    });\n  },\n});\n\nexport const productSelectors = productsAdapter.getSelectors(\n  (state: RootState) => state.catalog\n);\n\nexport const {setProductParams, resetProductParams, setMetaData, setPageNumber} = catalogSlice.actions;","import { createSlice } from \"@reduxjs/toolkit\"\n\nexport interface CounterState {\n  data: number;\n  title: string;\n}\n\nconst initialState: CounterState = {\n  data: 42,\n  title: \"REACT EXAMPLE REDUX TOOL KIT\"\n}\n\nexport const counterSlice = createSlice({\n  name: 'counter',\n  initialState,\n  reducers: {\n    increment: (state, action) => {\n      state.data += action.payload\n    },\n    decrement: (state, action) => {\n      state.data -= action.payload\n    }\n  }\n})\n\nexport const {increment, decrement} = counterSlice.actions;","import { configureStore } from \"@reduxjs/toolkit\";\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { accountSlice } from \"../../features/account/accountSlice\";\nimport { basketSlice } from \"../../features/basket/basketSlice\";\nimport { catalogSlice } from \"../../features/catalog/catalogSlice\";\nimport { counterSlice } from \"../../features/contact/counterSlice\";\n\n// export function configureStore() {\n//   return createStore(counterReducer);\n// }\n\nexport const store = configureStore({\n  reducer: {\n    counter: counterSlice.reducer,\n    basket: basketSlice.reducer,\n    catalog: catalogSlice.reducer,\n    account: accountSlice.reducer\n  }\n})\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import { Product } from \"../../app/models/product\";\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Typography\n} from \"@mui/material\";\n\nimport FavoriteIcon from '@mui/icons-material/Favorite'\nimport { Link } from \"react-router-dom\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { addBasketItemAsync } from \"../basket/basketSlice\";\n\ninterface Props {\n  product: Product;\n}\n\nexport default function ProductCard({ product }: Props) {\n  const { status } = useAppSelector(state => state.basket);\n  const dispatch = useAppDispatch();\n\n\n  return (\n    <Card >\n      <CardMedia\n        sx={{ height: 140 }}\n        image={product.pictureUrl}\n      />\n      <CardContent>\n        <Typography sx={{textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: \"nowrap\"}} gutterBottom variant=\"h5\" component=\"div\">\n          {product.name}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          {product.brand} / {product.type} \n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          ${product.price.toFixed(2)}\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <LoadingButton \n          loading={status.includes('pendingAddItem' + product.id)} \n          onClick={() => dispatch(addBasketItemAsync({ productId: product.id }))} \n          size=\"small\"\n        >\n          <FavoriteIcon />\n        </LoadingButton>\n        <Button component={Link} to={`/catalog/${product.id}`} size=\"small\">View</Button>\n      </CardActions>\n    </Card>\n  )\n}","import { Card, CardActions, CardContent, Grid, Skeleton } from '@mui/material'\n\nexport default function ProductCardSeketon() {\n  return (\n    <Grid item xs component={Card}>\n      <Skeleton sx={{height: 190}} animation=\"wave\" variant=\"rectangular\" />\n      <CardContent>\n        <>\n          <Skeleton animation=\"wave\" height={10} style={{marginBottom: 6}}/>\n          <Skeleton animation=\"wave\" height={10} width=\"80%\"/>\n        </>\n      </CardContent>\n      <CardActions>\n        <>\n          <Skeleton animation=\"wave\" height={10} width=\"40%\" />\n          <Skeleton animation=\"wave\" height={10} width=\"20%\" />\n        </>\n      </CardActions>\n    </Grid>\n  )\n}\n","import { Grid } from \"@mui/material\";\nimport { Product } from \"../../app/models/product\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport ProductCard from \"./ProductCard\";\nimport ProductCardSeketon from \"./ProductCardSeketon\";\n\ninterface Props {\n  products: Product[];\n}\n\nexport default function ProductList({ products }: Props) {\n  const {productsLoaded} = useAppSelector(state => state.catalog);\n  return (\n    <Grid sx={{mb: 4}} container spacing={4}>\n      {products.map((product) => (\n        <Grid key={product.id} item xs={12} sm={6} md={4} lg={3}>\n          {!productsLoaded ? (\n            <ProductCardSeketon />\n          ) : (\n            <ProductCard  product={product} />\n          )}\n        </Grid>\n      ))}\n    </Grid>\n  )\n}\n","import { debounce, TextField } from \"@mui/material\";\nimport { useState } from \"react\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { setProductParams } from \"./catalogSlice\";\n\nexport default function ProductSearch() {\n  const { productParams} = useAppSelector(state => state.catalog);\n  const [searchTerm , setSearchTerm] = useState(productParams.searchTerm);\n  const dispatch = useAppDispatch();\n\n  const debouncedSearch = debounce((event: any) => {\n    dispatch(setProductParams({searchTerm: event.target.value}))\n  }, 1000);\n\n  return (\n    <TextField\n      label=\"Search products\"\n      variant=\"outlined\"\n      fullWidth\n      value={searchTerm || ''}\n      onChange={(event: any) => {\n        setSearchTerm(event.target.value);\n        debouncedSearch(event);\n      }}\n    />\n  )\n}","\nimport { Grid, Paper } from \"@mui/material\";\nimport { useEffect } from \"react\";\nimport AppPagination from \"../../app/components/AppPagination\";\nimport CheckboxButtons from \"../../app/components/CheckboxButtons\";\nimport RadioButtonGroup from \"../../app/components/RadioButton\";\nimport Loader from \"../../app/layout/Loader\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { fetchFilters, fetchProductsAsync, productSelectors, setPageNumber, setProductParams } from \"./catalogSlice\";\nimport ProductList from \"./ProductList\";\nimport ProductSearch from \"./ProductSearch\";\n\nconst sortOptions = [\n  { value: 'name', label: \"Alphabetical\" },\n  { value: 'priceDesc', label: \"Price - High to low\" },\n  { value: 'priceAsc', label: \"Price - Low to high\" }\n]\n\nexport default function Catalog() {\n  const dispatch = useAppDispatch();\n  const products = useAppSelector(productSelectors.selectAll);\n  const { productsLoaded, filtersLoaded, brands, types, productParams, metaData } = useAppSelector(state => state.catalog);\n\n  useEffect(() => {\n    if (!productsLoaded) dispatch(fetchProductsAsync());\n  }, [productsLoaded, dispatch, filtersLoaded])\n\n  useEffect(() => {\n    if (!filtersLoaded) dispatch(fetchFilters());\n  }, [dispatch, filtersLoaded])\n\n  if (!filtersLoaded) return <Loader message=\"Getting Products\" />;\n\n\n  return (\n    <Grid container columnSpacing={4}>\n      <Grid item xs={12} sm={12} md={3} lg={3}>\n        <Paper sx={{ mb: 2 }}>\n          <ProductSearch />\n        </Paper>\n        <Paper sx={{ mb: 2, p: 2 }}>\n          <RadioButtonGroup\n            selectedValue={productParams.orderBy}\n            options={sortOptions}\n            onChange={(e) => dispatch(setProductParams({ orderBy: e.target.value }))}\n          />\n        </Paper>\n        <Paper sx={{ mb: 2, p: 2 }}>\n          <CheckboxButtons\n            items={brands}\n            checked={productParams.brands}\n            onChange={(items: string[]) => dispatch(setProductParams({ brands: items }))}\n          />\n        </Paper>\n        <Paper sx={{ mb: 2, p: 2 }}>\n          <CheckboxButtons\n            items={types}\n            checked={productParams.types}\n            onChange={(items: string[]) => dispatch(setProductParams({ types: items }))}\n          />\n        </Paper>\n      </Grid>\n      <Grid item xs={9} >\n        <ProductList products={products} />\n      </Grid>\n      <Grid item xs={3} />\n      <Grid item xs={9} sx={{ mb: 2, mt: -5 }}>\n        {metaData &&\n          <AppPagination\n            metaData={metaData}\n            onPageChange={(page: number) => dispatch(setPageNumber({ pageNumber: page }))}\n          />\n        }\n      </Grid>\n    </Grid>\n  );\n\n}","import { Button, Fade, Menu, MenuItem } from \"@mui/material\";\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { signOut } from \"../../features/account/accountSlice\";\nimport { clearBasket } from \"../../features/basket/basketSlice\";\nimport { useAppDispatch, useAppSelector } from \"../store/configureStore\";\n\nexport default function SignedInMenu() {\n  const dispatch = useAppDispatch();\n  const {user} = useAppSelector(state => state.account)\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleClick = (event:any) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <>\n      <Button \n        color=\"inherit\"\n        onClick={handleClick}\n        sx={{typography: 'h6'}}\n      >\n        {user?.email}\n      </Button>\n      <Menu\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        TransitionComponent={Fade}\n      >\n        <MenuItem onClick={handleClose}>Profile</MenuItem>\n        <MenuItem component={Link} to='/orders'>My orders</MenuItem>\n        <MenuItem onClick={() => {\n          dispatch(signOut());\n          dispatch(clearBasket());\n        }}>Logout</MenuItem>\n      </Menu>\n    </>\n  )\n}\n","import { ShoppingCart } from \"@mui/icons-material\";\nimport { AppBar, Badge, Box, IconButton, List, ListItem, Switch, Toolbar, Typography } from \"@mui/material\";\nimport { Link, NavLink } from \"react-router-dom\";\nimport { useAppSelector } from \"../store/configureStore\";\nimport SignedInMenu from \"./SignedInMenu\";\n\ninterface Props {\n  state: boolean;\n  changeMode: () => void;\n}\n\nconst midLinks = [\n  { title: 'home', path: '/' },\n  { title: 'about', path: '/about' },\n  { title: 'contact', path: '/contact' },\n]\n\nconst rightLinks = [\n  { title: 'login', path: '/login' },\n  { title: 'register', path: '/register' },\n]\n\nconst navStyles = {\n  typography: 'h8',\n  color: 'inherit',\n  textDecoration: 'none',\n  '&:hover': {\n    color: '#26c6da'\n  },\n  '&.active': {\n    color: \"text.secondary\"\n  }\n}\n\nexport default function Header({ changeMode, state }: Props) {\n  const { basket } = useAppSelector(state => state.basket);\n  const { user } = useAppSelector(state => state.account);\n  const itemCount = basket?.items.reduce((acc, item) => acc + item.quantity, 0);\n\n  return (\n    <AppBar position='static' sx={{ mb: 4 }}>\n      <Toolbar sx={{ display: \"flex\", justifyContent: \"space-between\", alignContent: \"center\" }}>\n        <Box display=\"flex\" alignItems=\"center\">\n          <Typography variant='h6' component={NavLink} to=\"/\" sx={navStyles}>\n            React Store\n          </Typography>\n          <Switch onChange={changeMode} checked={state} color=\"default\" />\n        </Box>\n        <List sx={{ display: 'flex' }}>\n          {midLinks.map(({ title, path }) => (\n            <ListItem\n              component={NavLink}\n              to={path}\n              key={path}\n              sx={navStyles}\n            >\n              {title.toUpperCase()}\n            </ListItem>\n          ))}\n        </List>\n        <Box display=\"flex\" alignItems=\"center\">\n          <IconButton component={Link} to=\"/basket\" size='large' sx={{ color: 'inherit' }}>\n            <Badge badgeContent={itemCount} color='secondary'>\n              <ShoppingCart />\n            </Badge>\n          </IconButton>\n\n          {user ? (\n            <SignedInMenu />\n          ) : (\n            <List sx={{ display: 'flex' }}>\n              {rightLinks.map(({ title, path }) => (\n                <ListItem\n                  component={NavLink}\n                  to={path}\n                  key={path}\n                  sx={navStyles}\n                >\n                  {title.toUpperCase()}\n                </ListItem>\n              ))}\n            </List>\n          )}\n        </Box>\n      </Toolbar>\n    </AppBar>\n  )\n}","import { Button, Container, Divider, Paper, Typography } from '@mui/material'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nexport default function ServerError() {\n  const history = useHistory();\n  const {state} = useLocation<any>();\n\n  return (\n    <Container component={Paper}>\n      {state?.error ? (\n        <>\n          <Typography variant=\"h3\" color=\"error\" gutterBottom>{state.error.title}</Typography>\n          <Divider />\n          <Typography>{state.error.detail || 'Internal Server error'}</Typography>\n        </>\n      ) : (\n        <Typography>Server Error</Typography>\n      )}\n      <Button onClick={() => history.push('/catalog')}></Button>\n    </Container>\n  )\n}\n","import { Button, Container, Divider, Paper, Typography } from \"@mui/material\"\nimport { Link } from \"react-router-dom\"\n\nexport default function NotFound() {\n  return (\n    <Container component={Paper} sx={{height: 400}}>\n      <Typography gutterBottom variant='h3'>\n        Opps - we couldn't find what you were looking for\n      </Typography>\n      <Divider/>\n      <Button fullWidth component={Link} to=\"/catalog\">\n        Go Back to Shop\n      </Button>\n    </Container>\n  )\n}","import { Alert, AlertTitle, Button, ButtonGroup, Container, ListItem, ListItemText, Typography } from '@mui/material'\nimport { useState } from 'react';\nimport agent from '../../app/api/agent'\n\nexport function AboutPage() {\n  const [errors, setErros] = useState<string[]>([]);\n\n  function getValidationError() {\n    agent.TestErrors.getValidationError()\n      .then(() => console.log(\"should not see this\"))\n      .catch(error => setErros(error));\n  }\n\n  return (\n    <Container>\n      <Typography gutterBottom variant=\"h4\">\n        Errors for testing\n      </Typography>\n      <ButtonGroup fullWidth>\n        <Button variant=\"contained\" onClick={() => agent.TestErrors.get400Error().catch(err => console.log(err))}>Test400 Error</Button>\n        <Button variant=\"contained\" onClick={() => agent.TestErrors.get401Error().catch(err => console.log(err))}>Test401 Error</Button>\n        <Button variant=\"contained\" onClick={() => agent.TestErrors.get404Error().catch(err => console.log(err))}>Test404 Error</Button>\n        <Button variant=\"contained\" onClick={() => agent.TestErrors.get500Error().catch(err => console.log(err))}>Test500 Error</Button>\n        <Button variant=\"contained\" onClick={getValidationError}>Test Validation Error</Button>\n      </ButtonGroup>\n      {errors.length > 0 && (\n        <Alert severity=\"error\">\n          <AlertTitle>Validation Errors</AlertTitle>\n          {errors.map(error => (\n            <ListItem key={error}>\n              <ListItemText>{error}</ListItemText>\n            </ListItem>\n          ))}\n        </Alert>\n      )}\n    </Container>\n  )\n}\n","import { Button, ButtonGroup, Typography } from \"@mui/material\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { decrement, increment } from \"./counterSlice\";\n\nexport default function ContactPage() {\n  const dispatch = useAppDispatch();\n  const { data, title } = useAppSelector(state => state.counter);\n\n  return (\n    <>\n      <Typography variant='h2'> \n        {title}\n      </Typography>\n      <Typography variant='h5'> \n        Data is: {data}\n      </Typography>\n      <ButtonGroup>\n        <Button onClick={() => dispatch(decrement(1))} variant='contained' color=\"error\">Decrement</Button>\n        <Button onClick={() => dispatch(increment(1))} variant='contained' color=\"primary\">Increment</Button>\n        <Button onClick={() => dispatch(increment(5))} variant='contained' color=\"secondary\">Increment By 5</Button>\n      </ButtonGroup>\n    </>\n  );\n}\n","import { LoadingButton } from '@mui/lab';\nimport { Divider, Grid, Table, TableBody, TableCell, TableContainer, TableRow, TextField, Typography } from '@mui/material'\nimport { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom';\nimport NotFound from '../../app/errors/NotFound';\nimport Loader from '../../app/layout/Loader';\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\nimport { addBasketItemAsync, removeBasketItemAsync } from '../basket/basketSlice';\nimport { fetchSingleProductAsync, productSelectors } from './catalogSlice';\n\nexport default function ProductDetailsPage() {\n  const {basket, status} = useAppSelector(state => state.basket);\n  const dispatch = useAppDispatch();\n  const {status: productStatus} = useAppSelector(state => state.catalog)\n  const {id} = useParams<{id: string}>();\n  const product = useAppSelector(state => productSelectors.selectById(state, id));\n  const [quantity, setQuantity] = useState(0);\n  const item = basket?.items.find(i => i.productId === product?.id);\n\n  useEffect(() => {\n    if (item) setQuantity(item.quantity);\n    if (!product) dispatch(fetchSingleProductAsync(parseInt(id)))\n  }, [id, item, dispatch, product])\n\n  function handleInputChange(event: any) {\n    if (event.target.value >= 0) {\n      setQuantity(parseInt(event.target.value));\n    }\n  }\n\n  function handleUpdateCard() {\n    if (!item || quantity > item.quantity) {\n      const updatedQuantity = item ? quantity - item.quantity : quantity;\n      dispatch(addBasketItemAsync({productId: product?.id!, quantity: updatedQuantity}))\n    } else {\n      const updatedQuantity = item.quantity - quantity;\n      dispatch(removeBasketItemAsync({productId: product?.id!, quantity: updatedQuantity}))\n    }\n  }\n\n  if (productStatus.includes('pending')) return <Loader message=\"Getting Product\"/>;\n\n  if (!product) return <NotFound/>\n\n  return (\n    <Grid container spacing={6}>\n      <Grid item xs={6}>\n        <img src={product.pictureUrl} alt={product.name} style={{width: '100%'}}/>\n      </Grid>\n      <Grid item xs={6}>\n        <Typography variant='h3'>{product.name}</Typography>\n        <Divider sx={{mb: 2}}></Divider>\n        <Typography variant='h4'>${product.price}</Typography>\n        <TableContainer>\n          <Table>\n            <TableBody>\n              <TableRow>\n                <TableCell>Name</TableCell>\n                <TableCell>{product.name}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Description</TableCell>\n                <TableCell>{product.description}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Type</TableCell>\n                <TableCell>{product.type}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Brand</TableCell>\n                <TableCell>{product.brand}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Quantity</TableCell>\n                <TableCell>{product.quantityInStock}</TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <Grid container spacing={2}>\n          <Grid item xs={6}>\n            <TextField\n              onChange={handleInputChange}\n              variant=\"outlined\"\n              type=\"number\"\n              label=\"Quantity in Cart\"\n              fullWidth\n              value={quantity}\n            />\n          </Grid>\n          <Grid item xs={6}>\n            <LoadingButton\n              disabled={item?.quantity === quantity || (!item && quantity === 0)}\n              loading={status.includes('pending')}\n              onClick={handleUpdateCard}\n              sx={{height: '55px'}}\n              color=\"primary\"\n              size=\"large\"\n              variant=\"contained\"\n              fullWidth\n            >\n              {item ? 'Update Quantity' : 'Add to Cart'}\n            </LoadingButton>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  )\n}\n","import { Paper, Table, TableBody, TableCell, TableContainer, TableRow } from \"@mui/material\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\n\ninterface Props {\n  subtotal?: number;\n}\n\nexport default function BasketSummary({subtotal}: Props) {\n  const {basket} = useAppSelector(state => state.basket)\n  if (subtotal === undefined) {\n    subtotal = basket?.items.reduce((sum, item) => sum + (item.quantity * item.price), 0) ?? 0;\n  }\n  const deliveryFee = subtotal > 100 ? 0 : 10;\n\n  return (\n    <>\n      <TableContainer component={Paper} variant={'outlined'}>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell colSpan={2}>Subtotal</TableCell>\n              <TableCell align=\"right\">${subtotal}</TableCell>\n            </TableRow> \n            <TableRow>\n              <TableCell colSpan={2}>Delivery fee*</TableCell>\n              <TableCell align=\"right\">${deliveryFee}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell colSpan={2}>Total</TableCell>\n              <TableCell align=\"right\">${subtotal ? subtotal + deliveryFee : deliveryFee}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell style={{fontStyle: 'italic'}}>*Orders over $100 qualify for free delivery</TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </>\n  )\n}\n\n","import { Remove, Add, Delete } from \"@mui/icons-material\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody, Box } from \"@mui/material\";\nimport { BasketItem } from \"../../app/models/basket\";\nimport { useAppSelector, useAppDispatch } from \"../../app/store/configureStore\";\nimport { removeBasketItemAsync, addBasketItemAsync } from \"./basketSlice\";\n\ninterface Props {\n  items: BasketItem[];\n  isBasket?: boolean;\n}\n\nexport default function BasketTable({items, isBasket = true}: Props) {\n  const { status } = useAppSelector(state => state.basket);\n  const dispatch = useAppDispatch();\n  \n  return (\n    <TableContainer component={Paper}>\n        <Table sx={{ minWidth: 650 }} >\n          <TableHead>\n            <TableRow>\n              <TableCell>Product</TableCell>\n              <TableCell align=\"right\">Price</TableCell>\n              <TableCell align=\"center\">Quantity</TableCell>\n              <TableCell align=\"right\">Sub Total</TableCell>\n              {isBasket && \n                <TableCell align=\"right\"></TableCell>\n              }\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {items.map((item) => (\n\n              <TableRow\n                key={item.productId}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n              >\n                <TableCell>\n                  <Box display=\"flex\" alignItems=\"center\">\n                    <img src={item.pictureUrl} alt={item.name} style={{ height: 50, marginRight: 20 }} />\n                    <span>{item.name}</span>\n                  </Box>\n                </TableCell>\n                <TableCell align=\"right\">${item.price}</TableCell>\n                <TableCell align=\"center\">\n                  {isBasket && \n                    <LoadingButton\n                      loading={status === 'pendingRemoveItem' + item.productId + 'rem'}\n                      onClick={() => dispatch(removeBasketItemAsync({ productId: item.productId, quantity: 1, name: 'rem' }))}\n                      color=\"error\"\n                    >\n                      <Remove />\n                    </LoadingButton>\n                  }\n                  {item.quantity}\n                  {isBasket && \n                    <LoadingButton\n                      loading={status === 'pendingAddItem' + item.productId}\n                      onClick={() => dispatch(addBasketItemAsync({ productId: item.productId }))}\n                      color=\"secondary\"\n                    >\n                      <Add />\n                    </LoadingButton>\n                  }\n                </TableCell>\n                <TableCell align=\"right\">${item.price * item.quantity}</TableCell>\n                {isBasket && \n                  <TableCell align=\"right\">\n                    <LoadingButton\n                      loading={status === 'pendingRemoveItem' + item.productId + 'del'}\n                      onClick={() => dispatch(removeBasketItemAsync({ productId: item.productId, quantity: item.quantity, name: 'del' }))}\n                      color=\"error\"\n                    >\n                      <Delete />\n                    </LoadingButton>\n                  </TableCell>\n                }\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n  )\n}\n","import { Link } from 'react-router-dom'\nimport { Button, Grid, Typography } from \"@mui/material\";\nimport BasketSummary from \"./BasketSummary\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport BasketTable from './BasketTable';\n\nexport default function BasketPage() {\n  const { basket } = useAppSelector(state => state.basket);\n\n  if (!basket) return <Typography variant=\"h3\">Your Basket is empty</Typography>\n\n  return (\n    <>\n      <BasketTable items={basket.items} />\n      <Grid container>\n        <Grid item xs={6} />\n        <Grid item xs={6} >\n          <BasketSummary />\n          <Button\n            component={Link}\n            to=\"/checkout\"\n            variant=\"contained\"\n            size=\"large\"\n            fullWidth\n          >\n            Checkout\n          </Button>\n        </Grid>\n\n      </Grid>\n    </>\n  )\n}\n","import Avatar from '@mui/material/Avatar';\nimport TextField from '@mui/material/TextField';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport { Paper } from '@mui/material';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { FieldValues, useForm } from 'react-hook-form';\nimport { LoadingButton } from '@mui/lab';\nimport { useAppDispatch } from '../../app/store/configureStore';\nimport { signInUser } from './accountSlice';\n\nexport default function Login() {\n  const history = useHistory();\n  const location = useLocation<any>();\n  const dispatch = useAppDispatch();\n  const { register, handleSubmit, formState: {isSubmitting, errors, isValid}} = useForm({\n    mode: 'all'\n  });\n\n  async function submitForm(data: FieldValues) {\n    try {\n      await dispatch(signInUser(data));\n      history.push(location.state?.from?.pathname || \"/\")\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  \n  return (\n    <Container\n      component={Paper}\n      maxWidth=\"sm\"\n      sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', p: 4 }}\n    >\n      <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\n        <LockOutlinedIcon />\n      </Avatar>\n      <Typography component=\"h1\" variant=\"h5\">\n        Sign in\n      </Typography>\n      <Box component=\"form\" onSubmit={handleSubmit(submitForm)} noValidate sx={{ mt: 1 }}>\n        <TextField\n          {...register('username', {required: 'Username is required'})}\n          error={!!errors.username}\n          helperText={errors?.username?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Username\"\n          autoFocus\n          />\n        <TextField\n          {...register('password', {required: 'Password is required'})}\n          error={!!errors.password}\n          helperText={errors?.password?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Password\"\n          type=\"password\"\n          autoComplete=\"current-password\"\n        />\n        <LoadingButton\n          disabled={!isValid}\n          loading={isSubmitting}\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          sx={{ mt: 3, mb: 2 }}\n        >\n          Sign In\n        </LoadingButton>\n        <Grid container>\n          <Grid item>\n            <Link to=\"/register\">\n              {\"Don't have an account? Sign Up\"}\n            </Link>\n          </Grid>\n        </Grid>\n      </Box>\n    </Container>\n  );\n}","import Avatar from '@mui/material/Avatar';\nimport TextField from '@mui/material/TextField';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport { Paper } from '@mui/material';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { LoadingButton } from '@mui/lab';\nimport agent from '../../app/api/agent';\nimport { toast } from 'react-toastify';\n\nexport default function Register() {\n  const history = useHistory();\n  const { register, handleSubmit, setError, formState: { isSubmitting, errors, isValid } } = useForm({\n    mode: 'all'\n  });\n\n  function handleApiErrors(errors: any) {\n    if (errors) {\n      errors.forEach((error: string) => {\n        if (error.includes('Password')) {\n          setError('password', {message: error});\n        } else if (error.includes('Email')) {\n          setError('email', {message: error});\n        } else if ('Username') {\n          setError('username', {message: error});\n        }\n      })\n    }\n  }\n\n  return (\n    <Container\n      component={Paper}\n      maxWidth=\"sm\"\n      sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', p: 4 }}\n    >\n      <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\n        <LockOutlinedIcon />\n      </Avatar>\n      <Typography component=\"h1\" variant=\"h5\">\n        Register\n      </Typography>\n      <Box component=\"form\" onSubmit={handleSubmit(data => {\n        agent.Account.register(data)\n          .then(() => { \n            toast.success(\"Succesfully Registered\");\n            history.push(\"/login\")\n          })\n          .catch(error => handleApiErrors(error))\n      })} noValidate sx={{ mt: 1 }}>\n        <TextField\n          {...register('username', { required: 'Username is required' })}\n          error={!!errors.username}\n          helperText={errors?.username?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Username\"\n          autoFocus\n        />\n        <TextField\n          {...register('email', { \n            required: 'Email is required',\n            pattern: {\n              value: /^\\w+[\\w-.]*@\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$/,\n              message: 'Not a valid email address'\n            }\n          })}\n          error={!!errors.email}\n          helperText={errors?.email?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Email\"\n        />\n        <TextField\n          {...register('password', { \n            required: 'Password is required',\n            pattern: {\n              value: /(?=^.{6,10}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*\\s).*$/,\n              message: \"Password needs to be 6-10 characteres long with a symbol and capital letter\"\n            }\n          })}\n          error={!!errors.password}\n          helperText={errors?.password?.message}\n          margin=\"normal\"\n          fullWidth\n          label=\"Password\"\n          type=\"password\"\n          autoComplete=\"current-password\"\n        />\n \n        <LoadingButton\n          disabled={!isValid}\n          loading={isSubmitting}\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          sx={{ mt: 3, mb: 2 }}\n        >\n          Register\n        </LoadingButton>\n        <Grid container>\n          <Grid item>\n            <Link to=\"/login\">\n              {\"Already have an account? Sign Up\"}\n            </Link>\n          </Grid>\n        </Grid>\n      </Box>\n    </Container>\n  );\n}","import { ComponentType } from \"react\";\nimport { Redirect, Route, RouteComponentProps, RouteProps } from \"react-router-dom\";\nimport { useAppSelector } from \"../store/configureStore\";\n\ninterface Props extends RouteProps {\n  component: ComponentType<RouteComponentProps<any>> | ComponentType<any>\n}\n\nexport default function PrivateRoute({ component: Component, ...rest }: Props) {\n  const { user } = useAppSelector(state => state.account);\n\n  return (\n    <Route {...rest} render={props => user ? (\n        <Component  {...props} />\n      ) : (\n        <Redirect to={{ pathname: \"/login\", state: { from: props.location } }} />\n      )\n    }/>\n  );\n}\n","import { Box, Button, Grid, Typography } from \"@mui/material\";\nimport { BasketItem } from \"../../app/models/basket\";\nimport { Order } from \"../../app/models/order\";\nimport BasketSummary from \"../basket/BasketSummary\";\nimport BasketTable from \"../basket/BasketTable\";\n\ninterface Props {\n  order: Order;\n  setSelectedOrder: (id: number) => void;\n}\n\nexport default function OrderDetail({order, setSelectedOrder}: Props) {\n  const subtotal = order.orderItems.reduce((acc, item) => acc + (item.price * item.quantity), 0) ?? 0;\n\n  return (\n    <>\n      <Box display=\"flex\" justifyContent=\"space-between\">\n        <Typography sx={{p: 2}} gutterBottom variant=\"h4\">Order# {order.id} - {order.orderStatus}</Typography>\n        <Button onClick={() => setSelectedOrder(0)} sx={{m: 2}} size=\"large\" variant=\"contained\">\n          Back To Orders\n        </Button>\n      </Box>\n      <BasketTable items={order.orderItems as BasketItem[]} isBasket={false} />\n      <Grid container>\n        <Grid item xs={6} />\n        <Grid item xs={6}>\n          <BasketSummary subtotal={subtotal} />\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import { TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody, Button } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport agent from \"../../app/api/agent\";\nimport Loader from \"../../app/layout/Loader\";\nimport { Order } from \"../../app/models/order\";\nimport OrderDetail from \"./OrderDetail\";\n\nexport default function Orders() {\n  const [orders, setOrders] = useState<Order[] | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedOrderNumber, setSelectedorderNumber] = useState(0);\n\n  useEffect(() => {\n    agent.Orders.list()\n      .then(orders => setOrders(orders))\n      .catch(error => console.log(error))\n      .finally(() => setLoading(false))\n  }, [])\n\n  if (selectedOrderNumber > 0) return (\n    <OrderDetail \n      order={orders?.find(o => o.id === selectedOrderNumber)!}\n      setSelectedOrder={setSelectedorderNumber}\n    />\n  )\n\n  if (loading) return <Loader message=\"Loading Orders...\"/>\n\n  return (\n    <TableContainer component={Paper}>\n      <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n        <TableHead>\n          <TableRow>\n            <TableCell>Order Number</TableCell>\n            <TableCell align=\"right\">Total</TableCell>\n            <TableCell align=\"right\">Order Date</TableCell>\n            <TableCell align=\"right\">Order Status</TableCell>\n            <TableCell align=\"right\"></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {orders?.map((order) => (\n            <TableRow\n              key={order.id}\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n            >\n              <TableCell component=\"th\" scope=\"row\">\n                {order.id}\n              </TableCell>\n              <TableCell align=\"right\">${(order.total).toFixed(2)}</TableCell>\n              <TableCell align=\"right\">{order.orderDate.split('T')[0]}</TableCell>\n              <TableCell align=\"right\">{order.orderStatus}</TableCell>\n              <TableCell align=\"right\">\n                <Button onClick={() => setSelectedorderNumber(order.id)}>\n                  View\n                </Button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import { Checkbox, FormControlLabel } from \"@mui/material\";\nimport { useController, UseControllerProps } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {\n  label: string;\n  disabled: boolean;\n}\n\nexport default function AppCheckbox(props: Props) {\n  const { field } = useController({...props, defaultValue: false});\n  \n  return (\n    <FormControlLabel\n      control={\n        <Checkbox\n          {...field}\n          checked={field.value}\n          color='secondary'\n          disabled={props.disabled}\n        />\n      }   \n      label={props.label}\n    />\n  )\n}","import { TextField } from \"@mui/material\";\nimport { useController, UseControllerProps } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {\n  label: string;\n}\n\nexport default function AppTextInput(props: Props) {\n  const { fieldState, field} = useController({...props, defaultValue: ''})\n  return (\n    <TextField\n      {...props}\n      {...field}\n      fullWidth\n      variant='outlined'\n      error={!!fieldState.error}\n      helperText={fieldState.error?.message}\n    />\n  )\n}"," import { Button, Grid, Typography } from \"@mui/material\";\nimport { useFormContext } from \"react-hook-form\";\nimport AppCheckbox from \"../../app/components/AppCheckbox\";\nimport AppTextInput from \"../../app/components/AppTextInput\";\n\nexport default function AddressForm() {\n  const {control, formState } = useFormContext();\n\n  return (\n    <>\n      <Typography>\n        Shipping Address\n      </Typography>\n      \n        <Grid container spacing={3}>\n          <Grid item xs={12} sm={12}>\n            <AppTextInput control={control} name=\"fullName\" label=\"Full name\"/>\n          </Grid>\n          <Grid item xs={12}>\n            <AppTextInput control={control} name=\"address1\" label=\"Address 1\"/>\n          </Grid>\n          <Grid item xs={12}>\n            <AppTextInput control={control} name=\"address2\" label=\"Address 2\"/>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput control={control} name=\"city\" label=\"City\"/>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput control={control} name=\"state\" label=\"State\"/>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput control={control} name=\"country\" label=\"Country\"/>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <AppTextInput control={control} name=\"zip\" label=\"Zip\"/>\n          </Grid>\n          <Grid item xs={12}>\n            <AppCheckbox disabled={!formState.isDirty} name='saveAddress' label='Save this as the default address' control={control} />\n          </Grid>\n        </Grid>\n        <Button>Submit Form</Button>\n    </>\n  )\n}\n","import { InputBaseComponentProps } from \"@mui/material\";\nimport { forwardRef, Ref, useImperativeHandle, useRef } from \"react\";\n\ninterface Props extends InputBaseComponentProps {\n\n}\n\nexport const StripeInput = forwardRef(function StripeInput({\n  component: Component, ...props\n}: Props, ref: Ref<unknown>) {\n    const elementRef = useRef<any>();\n    useImperativeHandle(ref, () => ({\n      focus: () => elementRef.current.focus\n    }));\n    return (\n      <Component\n        onReady={(element: any) => elementRef.current = element}\n        {...props}\n      />\n      \n    )\n});","import { Grid, TextField, Typography } from \"@mui/material\";\nimport {\n  CardCvcElement,\n  CardExpiryElement,\n  CardNumberElement,\n} from \"@stripe/react-stripe-js\";\nimport { StripeElementType } from \"@stripe/stripe-js\";\n\nimport { useFormContext } from \"react-hook-form\";\nimport AppTextInput from \"../../app/components/AppTextInput\";\nimport { StripeInput } from \"./StripeInput\";\n\ninterface Props {\n  card: {elementError: {[key in StripeElementType]?: string}};\n  onCardInputChange: (event: any) => void;\n}\n\nexport default function PaymentForm({card, onCardInputChange}: Props) {\n  const { control } = useFormContext();\n  \n  return (\n    <>\n      <Typography variant=\"h6\" gutterBottom>\n        Payment Method\n      </Typography>\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={6}>\n          <AppTextInput\n            name=\"nameOnCard\"\n            label=\"Name on card\"\n            control={control}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!card.elementError.cardNumber}\n            helperText={card.elementError.cardNumber}\n            id=\"cardNumber\"\n            label=\"Card Number\"\n            fullWidth\n            autoComplete=\"cc-number\"\n            variant=\"outlined\"\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardNumberElement,\n              },\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!card.elementError.cardCvc}\n            helperText={card.elementError.cardExpiry}\n            id=\"expDate\"\n            label=\"Expiry Date\"\n            fullWidth\n            autoComplete=\"cc-exp\"\n            variant=\"outlined\"\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardExpiryElement,\n              },\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!card.elementError.cardCvc}\n            helperText={card.elementError.cardCvc}\n            id=\"cvv\"\n            label=\"CVV\"\n            fullWidth\n            autoComplete=\"cc-csc\"\n            variant=\"outlined\"\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardCvcElement,\n              },\n            }}\n          />\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n","import {  Grid, Typography } from \"@mui/material\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport BasketSummary from \"../basket/BasketSummary\";\nimport BasketTable from \"../basket/BasketTable\";\n\nexport default function Review() {\n  const { basket } = useAppSelector(state => state.basket);\n\n  return (\n    <>\n      <Typography variant=\"h6\" gutterBottom>\n        Order summary\n      </Typography> \n      {basket && \n        <BasketTable items={basket.items} isBasket={false}/>\n      }\n      <Grid container>\n        <Grid item xs={6} />\n        <Grid item xs={6} >\n          <BasketSummary />\n        </Grid>\n\n      </Grid>\n    </>\n  );\n}\n","import * as yup from 'yup';\n\nexport const validationSchema = [\n  yup.object({\n    fullName: yup.string().required(\"Full name is required\"),\n    address1: yup.string().required(\"Adress line is required\"),\n    address2: yup.string().required(\"Adress 2 line is required\"),\n    city: yup.string().required(\"City line is required\"),\n    state: yup.string().required(\"State line is required\"),\n    zip: yup.string().required(\"Zip line is required\"),\n    country: yup.string().required(\"Country line is required\")\n  }),\n  yup.object(),\n  yup.object({\n    nameOnCard: yup.string().required()\n  })\n]\n","import {\n  Box,\n  Button,\n  Paper,\n  Step,\n  StepLabel,\n  Stepper,\n  Typography,\n} from \"@mui/material\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useEffect, useState } from \"react\";\nimport { FieldValues, FormProvider, useForm } from \"react-hook-form\";\nimport AddressForm from \"./AddressForm\";\nimport PaymentForm from \"./PaymentForm\";\nimport Review from \"./Review\";\nimport { validationSchema } from \"./checkoutValidation\";\nimport agent from \"../../app/api/agent\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { clearBasket } from \"../basket/basketSlice\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { StripeElementType } from \"@stripe/stripe-js\";\nimport {\n  CardNumberElement,\n  useElements,\n  useStripe,\n} from \"@stripe/react-stripe-js\";\n\nconst steps = [\"Shipping Addressss\", \"Review your order\", \"Payment Details\"];\n\nexport default function CheckoutPage() {\n  const [activeStep, setActiveStep] = useState(0);\n  const [orderNumber, setOrderNumber] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const dispatch = useAppDispatch();\n  const [card, setCard] = useState<{\n    elementError: { [key in StripeElementType]?: string };\n  }>({\n    elementError: {},\n  });\n  const [cardComplete, setCardComplete] = useState<any>({\n    cardNumber: false,\n    cardExpiry: false,\n    cardCvc: false,\n  });\n  const [paymentMessage, setPaymentMessage] = useState(\"\");\n  const [paymentSucceded, setPaymentSucceded] = useState(false);\n  const { basket } = useAppSelector((state) => state.basket);\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const currentValidationSchema = validationSchema[activeStep];\n  const methods = useForm({\n    mode: \"all\",\n    resolver: yupResolver(currentValidationSchema),\n  });\n\n  function onCardInputChange(event: any) {\n    setCard({\n      ...card,\n      elementError: {\n        ...card.elementError,\n        [event.elementType]: event.error?.message,\n      },\n    });\n    setCardComplete({ ...cardComplete, [event.elementType]: event.complete });\n  }\n\n  function getStepContent(step: number) {\n    switch (step) {\n      case 0:\n        return <AddressForm />;\n      case 1:\n        return <Review />;\n      case 2:\n        return (\n          <PaymentForm card={card} onCardInputChange={onCardInputChange} />\n        );\n      default:\n        throw new Error(\"Unkown step\");\n    }\n  }\n\n  useEffect(() => {\n    agent.Account.fetchAddress().then((response) => {\n      if (response) {\n        methods.reset({\n          ...methods.getValues(),\n          ...response,\n          saveAddress: false,\n        });\n      }\n    });\n  }, [methods]);\n\n  async function submitOrder(data: FieldValues) {\n    setLoading(true);\n    const { nameOnCard, saveAddress, ...shippingAddress } = data;\n    if (!stripe || !elements) return; // none are ready;\n    try {\n      const cardElement = elements.getElement(CardNumberElement);\n      const paymentResult = await stripe.confirmCardPayment(\n        basket?.clientSecret!,\n        {\n          payment_method: {\n            card: cardElement!,\n            billing_details: {\n              name: nameOnCard,\n            },\n          },\n        }\n      );\n      console.log(paymentResult);\n      if (paymentResult.paymentIntent?.status === \"succeeded\") {\n        const orderNumber = await agent.Orders.create({\n          saveAddress,\n          shippingAddress,\n        });\n        setOrderNumber(orderNumber);\n        setPaymentSucceded(true);\n        setPaymentMessage(\"Successful Payment\");\n        setActiveStep(activeStep + 1);\n        dispatch(clearBasket());\n        setLoading(false);\n      } else {\n        setPaymentMessage(paymentResult.error?.message!);\n        setPaymentSucceded(false);\n        setLoading(false);\n        setActiveStep(activeStep + 1);\n      }\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n    }\n  }\n\n  const handleNext = async (data: FieldValues) => {\n    if (activeStep === steps.length - 1) {\n      await submitOrder(data);\n    } else {\n      setActiveStep(activeStep + 1);\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep(activeStep - 1);\n  };\n\n  function submitDisabled(): boolean {\n    if (activeStep === steps.length - 1) {\n      return (\n        !cardComplete.cardCvc ||\n        !cardComplete.cardExpiry ||\n        !cardComplete.cardNumber ||\n        !methods.formState.isValid\n      );\n    } else {\n      return !methods.formState.isValid;\n    }\n  }\n\n  return (\n    <FormProvider {...methods}>\n      <Paper\n        variant=\"outlined\"\n        sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\n      >\n        <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n          Checkout\n        </Typography>\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\n          {steps.map((label) => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n        <>\n          {activeStep === steps.length ? (\n            <>\n              <Typography variant=\"h5\" gutterBottom>\n                {paymentMessage}\n              </Typography>\n              {paymentSucceded ? (\n                <Typography variant=\"subtitle1\">\n                  Your order number is #{orderNumber}.\n                </Typography>\n              ) : (\n                <Button variant=\"contained\" onClick={handleBack}>\n                  Go back and try again\n                </Button>\n              )}\n            </>\n          ) : (\n            <form onSubmit={methods.handleSubmit(handleNext)}>\n              {getStepContent(activeStep)}\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                {activeStep !== 0 && (\n                  <Button onClick={handleBack} sx={{ mt: 3, ml: 1 }}>\n                    Back\n                  </Button>\n                )}\n                <LoadingButton\n                  loading={loading}\n                  disabled={submitDisabled()}\n                  variant=\"contained\"\n                  type=\"submit\"\n                  sx={{ mt: 3, ml: 1 }}\n                >\n                  {activeStep === steps.length - 1 ? \"Place Order\" : \"Next\"}\n                </LoadingButton>\n              </Box>\n            </form>\n          )}\n        </>\n      </Paper>\n    </FormProvider>\n  );\n}\n","import { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { useEffect, useState } from \"react\";\nimport agent from \"../../app/api/agent\";\nimport Loader from \"../../app/layout/Loader\";\nimport { useAppDispatch } from \"../../app/store/configureStore\";\nimport { setBasket } from \"../basket/basketSlice\";\nimport CheckoutPage from \"./CheckoutPage\";\n\nconst stripePromise = loadStripe('pk_test_nuCrlciTxrzNBPXHtArKSvnC')\n\nexport default function CheckoutWrapper(){\n  const dispatch = useAppDispatch();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    agent.Payments.createPaymentItent()\n      .then(basket => dispatch(setBasket(basket)))\n      .catch(error => console.log(\"ERROR\",error))\n      .finally(() => setLoading(false));\n  }, [dispatch]);\n\n  if (loading) return <Loader message=\"Loading Checkout\"/>\n\n  return (\n    <Elements stripe={stripePromise}>\n      <CheckoutPage/>\n    </Elements>\n  )\n}","\nimport { Container, createTheme, CssBaseline, ThemeProvider } from \"@mui/material\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport Catalog from \"../../features/catalog/Catalog\";\nimport Header from \"./Header\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport ServerError from \"../errors/ServerError\";\nimport NotFound from \"../errors/NotFound\";\nimport Loader from \"./Loader\";\nimport { fetchBasketAsync } from \"../../features/basket/basketSlice\";\nimport { useAppDispatch } from \"../store/configureStore\";\n\nimport { AboutPage } from \"../../features/about/AboutPage\";\nimport ContactPage from \"../../features/contact/ContactPage\";\nimport ProductDetailsPage from \"../../features/catalog/ProductDetailsPage\";\nimport BasketPage from \"../../features/basket/BasketPage\";\nimport Login from \"../../features/account/Login\";\nimport Register from \"../../features/account/Register\";\nimport { fetchCurrentUser } from \"../../features/account/accountSlice\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport Orders from \"../../features/orders/Orders\";\nimport CheckoutWrapper from \"../../features/checkout/CheckoutWrapper\";\n  \n\nfunction App() {\n  const dispatch = useAppDispatch();\n  const [loading, setLoading] = useState(true);\n  const [darkMode, setDarkMode] = useState(false);\n  const palleteType = darkMode ? 'dark' : 'light';\n\n  // functionality for dark or light theme\n  const theme = createTheme({\n    palette: {\n      mode: `${palleteType}`,\n      background: {\n        default: ( palleteType === 'light' ? '#efefef' : '#121212')\n      }\n    }\n  });\n\n  const initApp = useCallback(async () => {\n    try {\n      await dispatch(fetchCurrentUser());\n      await dispatch(fetchBasketAsync());\n    } catch (error) {\n      console.log(error);\n    }\n  }, [dispatch])\n\n  useEffect(() => {\n    initApp().then(() => setLoading(false))\n  }, [initApp])\n\n  const changeMode = () => {\n    setDarkMode(!darkMode);\n  }\n\n  if (loading) return <Loader message=\"Initialising App...\" />\n\n  return (\n    <ThemeProvider theme={theme}>\n      <ToastContainer theme=\"colored\" position=\"bottom-right\"/>\n      <CssBaseline/>\n      <Header state={darkMode} changeMode={changeMode}/>\n      <Container sx={{mb: 4}}>\n        <Switch>\n          <Route exact path=\"/\" component={Catalog} />\n          <Route exact path=\"/catalog/:id\" component={ProductDetailsPage} />\n          <Route exact path=\"/about\" component={AboutPage} />\n          <Route exact path=\"/basket\" component={BasketPage} />\n          <PrivateRoute exact path=\"/checkout\" component={CheckoutWrapper} />\n          <PrivateRoute exact path=\"/orders\" component={Orders} />\n          <Route exact path=\"/login\" component={Login} />\n          <Route exact path=\"/register\" component={Register} />\n          <Route exact path=\"/contact\" component={ContactPage} />\n          <Route exact path=\"/server-error\" component={ServerError} />\n          <Route component={NotFound} />\n        </Switch>\n      </Container>\n    </ThemeProvider>\n  )\n  \n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './app/layout/styles.css';\nimport App from './app/layout/App';\nimport reportWebVitals from './reportWebVitals';\nimport { createBrowserHistory } from 'history';\nimport { Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './app/store/configureStore';\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router history={history} >\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}